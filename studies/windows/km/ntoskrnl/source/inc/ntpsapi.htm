<!doctype html>
<html lang="en">

<head>
<title>NTPSAPI.H</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="43332" -->
<div class="Main">
  <h1>NTPSAPI.H </h1>
  <p>The public symbol file NTKRPAMP.PDB for the original release of Windows 10 
  tells that the kernel is built with the NTPSAPI.H header at </p>
  <blockquote>
    d:\th.public.fre\internal\sdk\inc
  </blockquote>
  <p>and draws from it the following type definitions: </p>
  <table class="LineNumbers">
    <colgroup>
      <col class="LineNumber"><col class="Name">
    </colgroup>
    <thead>
      <tr>
        <th>Line Number </th>
        <th>Type </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>589 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntpsapi/process_disk_counters.htm">_PROCESS_DISK_COUNTERS</a></span>
        </td>
      </tr>
      <tr>
        <td>620 </td>
        <td>struct <span class="struct">_THREAD_ENERGY_VALUES</span> </td>
      </tr>
      <tr>
        <td>624 </td>
        <td>struct <span class="struct">_PROCESS_ENERGY_VALUES</span> </td>
      </tr>
      <tr>
        <td>652 </td>
        <td>struct <span class="struct">_COUNTER_READING</span> </td>
      </tr>
      <tr>
        <td>666 </td>
        <td>struct <span class="struct">_THREAD_PERFORMANCE_DATA</span> </td>
      </tr>
      <tr>
        <td>1631 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntpsapi/ps_protection.htm">_PS_PROTECTION</a></span>
        </td>
      </tr>
      <tr>
        <td>1646 </td>
        <td>enum <span class="enum">
        <a href="../../inc/api/ntpsapi/ps_protected_signer.htm">_PS_PROTECTED_SIGNER</a></span>
        </td>
      </tr>
      <tr>
        <td>2189 </td>
        <td>struct <span class="struct">_JOBOBJECT_WAKE_FILTER</span> </td>
      </tr>
      <tr>
        <td>2219 </td>
        <td>enum <span class="enum">_PS_WAKE_REASON</span> </td>
      </tr>
    </tbody>
  </table>
  <p>The header NTPSAPI.H is not known in any Device Driver Kit (DDK) or Windows 
  Driver Kit (WDK). </p>
  <h2>Anti-Trust Settlement Forensics </h2>
  <p>For the record, here are the very many more types that Microsoft’s freely published 
  URLMON.PDB reveals were accessible to the source code for URLMON.DLL from including 
  NTPSAPI.H when building Internet Explorer for the original release of 32-bit Windows 
  10: </p>
  <table class="LineNumbers">
    <colgroup>
      <col class="LineNumber"><col class="Name">
    </colgroup>
    <thead>
      <tr>
        <th>Line Number </th>
        <th>Type </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>390 </td>
        <td>struct <span class="struct">_Wx86TIB</span> </td>
      </tr>
      <tr>
        <td>437 </td>
        <td>struct <span class="struct">_INITIAL_TEB</span> </td>
      </tr>
      <tr>
        <td>438 </td>
        <td>unnamed struct <span class="member">OldInitialTeb</span> in <br>
        struct <span class="struct">_INITIAL_TEB</span> </td>
      </tr>
      <tr>
        <td>461 </td>
        <td>struct <span class="struct">_PROCESS_PRIORITY_CLASS</span> </td>
      </tr>
      <tr>
        <td>466 </td>
        <td>struct <span class="struct">_PROCESS_FOREGROUND_BACKGROUND</span>
        </td>
      </tr>
      <tr>
        <td>475 </td>
        <td>enum <span class="enum">_PROCESS_TLS_INFORMATION_TYPE</span> </td>
      </tr>
      <tr>
        <td>484 </td>
        <td>struct <span class="struct">_THREAD_TLS_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>497 </td>
        <td>struct <span class="struct">_PROCESS_TLS_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>531 </td>
        <td>struct <span class="struct">_PROCESS_BASIC_INFORMATION64</span> </td>
      </tr>
      <tr>
        <td>542 </td>
        <td>struct <span class="struct">_PROCESS_EXTENDED_BASIC_INFORMATION64</span>
        </td>
      </tr>
      <tr>
        <td>567 </td>
        <td>struct <span class="struct">_PROCESS_CYCLE_TIME_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>579 </td>
        <td>struct <span class="struct">_PROCESS_INSTRUMENTATION_CALLBACK_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>589 </td>
        <td>struct <span class="struct">_PROCESS_DISK_COUNTERS</span> </td>
      </tr>
      <tr>
        <td>601 </td>
        <td>enum <span class="enum">_PROCESS_ENERGY_COMPONENT_TYPE_NUM</span>
        </td>
      </tr>
      <tr>
        <td>620 </td>
        <td>struct <span class="struct">_THREAD_ENERGY_VALUES</span> </td>
      </tr>
      <tr>
        <td>624 </td>
        <td>struct <span class="struct">_PROCESS_ENERGY_VALUES</span> </td>
      </tr>
      <tr>
        <td>652 </td>
        <td>struct <span class="struct">_COUNTER_READING</span> </td>
      </tr>
      <tr>
        <td>666 </td>
        <td>struct <span class="struct">_THREAD_PERFORMANCE_DATA</span> </td>
      </tr>
      <tr>
        <td>679 </td>
        <td>struct <span class="struct">_THREAD_PROFILING_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>692 </td>
        <td>struct <span class="struct">_PROCESS_WS_WATCH_INFORMATION_EX</span>
        </td>
      </tr>
      <tr>
        <td>704 </td>
        <td>union <span class="struct">_PROCESS_AFFINITY_UPDATE_MODE</span> </td>
      </tr>
      <tr>
        <td>719 </td>
        <td>union <span class="union">_PROCESS_MEMORY_ALLOCATION_MODE</span>
        </td>
      </tr>
      <tr>
        <td>733 </td>
        <td>struct <span class="struct">_PROCESS_WINDOW_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>745 </td>
        <td>struct <span class="struct">_PROCESS_HANDLE_TABLE_ENTRY_INFO</span>
        </td>
      </tr>
      <tr>
        <td>756 </td>
        <td>struct <span class="struct">_PROCESS_HANDLE_SNAPSHOT_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>774 </td>
        <td>struct <span class="struct">_PROCESS_STACK_ALLOCATION_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>780 </td>
        <td>struct <span class="struct">_PROCESS_STACK_ALLOCATION_INFORMATION_EX</span>
        </td>
      </tr>
      <tr>
        <td>794 </td>
        <td>struct <span class="struct">_PROCESS_MITIGATION_POLICY_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>834 </td>
        <td>struct <span class="struct">_PROCESS_FAULT_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>845 </td>
        <td>struct <span class="struct">_PROCESS_TELEMETRY_ID_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>873 </td>
        <td>struct <span class="struct">_PROCESS_COMMIT_RELEASE_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>892 </td>
        <td>struct <span class="struct">_THREAD_BASIC_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>907 </td>
        <td>struct <span class="struct">_THREAD_TEB_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>919 </td>
        <td>struct <span class="struct">_THREAD_LAST_SYSCALL_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>932 </td>
        <td>struct <span class="struct">_THREAD_CYCLE_TIME_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>956 </td>
        <td>struct <span class="struct">_PS_CPU_QUOTA_QUERY_ENTRY</span> </td>
      </tr>
      <tr>
        <td>961 </td>
        <td>struct <span class="struct">
        <a href="../../api/ps/psquota/query.htm">_PS_CPU_QUOTA_QUERY_INFORMATION</a></span>
        </td>
      </tr>
      <tr>
        <td>966 </td>
        <td>struct <span class="struct"><a href="../../api/ps/psquota/set.htm">_PS_CPU_QUOTA_SET_INFORMATION</a></span>
        </td>
      </tr>
      <tr>
        <td>971 </td>
        <td>struct <span class="struct">_PROCESS_HANDLE_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>980 </td>
        <td>struct <span class="struct">_FIBER</span> </td>
      </tr>
      <tr>
        <td>1094 </td>
        <td>enum <span class="enum">_PS_ATTRIBUTE_NUM</span> </td>
      </tr>
      <tr>
        <td>1122 </td>
        <td>struct <span class="struct">_PS_ATTRIBUTE</span> </td>
      </tr>
      <tr>
        <td>1132 </td>
        <td>struct <span class="struct">_PS_ATTRIBUTE_LIST</span> </td>
      </tr>
      <tr>
        <td>1185 </td>
        <td>struct <span class="struct">_PS_MEMORY_RESERVE</span> </td>
      </tr>
      <tr>
        <td>1190 </td>
        <td>enum <span class="enum">PS_CREATE_STATE</span> </td>
      </tr>
      <tr>
        <td>1215 </td>
        <td>enum <span class="enum">_PS_STD_HANDLE_STATE</span> </td>
      </tr>
      <tr>
        <td>1222 </td>
        <td>struct <span class="struct">_PS_STD_HANDLE_INFO</span> </td>
      </tr>
      <tr>
        <td>1631 </td>
        <td>struct <span class="struct">_PS_PROTECTION</span> </td>
      </tr>
      <tr>
        <td>1646 </td>
        <td>enum <span class="enum">_PS_PROTECTED_SIGNER</span> </td>
      </tr>
      <tr>
        <td>1661 </td>
        <td>enum <span class="enum">_PS_PROTECTED_TYPE</span> </td>
      </tr>
      <tr>
        <td>1712 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntpsapi/ps_create_info/index.htm">_PS_CREATE_INFO</a></span>
        </td>
      </tr>
      <tr>
        <td>1716 </td>
        <td>unnamed struct <span class="member">InitState</span> in <br>
        struct <span class="struct">_PS_CREATE_INFO</span> </td>
      </tr>
      <tr>
        <td>1734 </td>
        <td>unnamed struct <span class="member">FailSection</span> in <br>
        struct <span class="struct">_PS_CREATE_INFO</span> </td>
      </tr>
      <tr>
        <td>1738 </td>
        <td>unnamed struct <span class="member">ExeFormat</span> in <br>
        struct <span class="struct">_PS_CREATE_INFO</span> </td>
      </tr>
      <tr>
        <td>1742 </td>
        <td>unnamed struct <span class="member">ExeName</span> in <br>
        struct <span class="struct">_PS_CREATE_INFO</span> </td>
      </tr>
      <tr>
        <td>1746 </td>
        <td>unnamed struct <span class="member">SuccessState</span> in <br>
        struct <span class="struct">_PS_CREATE_INFO</span> </td>
      </tr>
      <tr>
        <td>1911 </td>
        <td>struct <span class="struct">_X86_CALL_FRAME</span> </td>
      </tr>
      <tr>
        <td>1939 </td>
        <td>struct <span class="struct">_CALL_FRAME</span> </td>
      </tr>
      <tr>
        <td>2163 </td>
        <td>struct <span class="struct">_JOBOBJECT_EXTENDED_ACCOUNTING_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>2189 </td>
        <td>struct <span class="struct">_JOBOBJECT_WAKE_FILTER</span> </td>
      </tr>
      <tr>
        <td>2198 </td>
        <td>struct <span class="struct">_JOBOBJECT_FREEZE_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>2219 </td>
        <td>enum <span class="enum">_PS_WAKE_REASON</span> </td>
      </tr>
      <tr>
        <td>2228 </td>
        <td>struct <span class="struct">_JOBOBJECT_WAKE_INFORMATION_V1</span>
        </td>
      </tr>
      <tr>
        <td>2233 </td>
        <td>struct <span class="struct">_JOBOBJECT_WAKE_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>2243 </td>
        <td>struct <span class="struct">_JOBOBJECT_INTERFERENCE_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>2247 </td>
        <td>struct <span class="struct">_JOBOBJECT_MEMORY_USAGE_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>2254 </td>
        <td>struct <span class="struct">_JOBOBJECT_MEMORY_USAGE_INFORMATION_V2</span>
        </td>
      </tr>
      <tr>
        <td>2275 </td>
        <td>struct <span class="struct">_JOBOBJECT_NOTIFICATION_LIMIT_INFORMATION_V2</span>
        </td>
      </tr>
      <tr>
        <td>2301 </td>
        <td>struct <span class="struct">_JOBOBJECT_LIMIT_VIOLATION_INFORMATION_V2</span>
        </td>
      </tr>
      <tr>
        <td>2403 </td>
        <td>enum <span class="enum">_MEMORY_RESERVE_TYPE</span> </td>
      </tr>
      <tr>
        <td>2430 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntpsapi/ps_system_dll_init_block.htm">_PS_SYSTEM_DLL_INIT_BLOCK</a></span>
        </td>
      </tr>
      <tr>
        <td>2460 </td>
        <td>struct <span class="struct">_PS_PKG_CLAIM</span> </td>
      </tr>
    </tbody>
  </table>
  <p>This looks to be a complete reckoning of named classes, enumerations, structures 
  and unions that are defined in the unseen NTPSAPI.H. A contemporaneous statically 
  linked library named CLFSMGMT.LIB has its type information from creating a pre-compiled 
  header, such that it almost certainly is complete for its inclusions from NTPSAPI.H, 
  and yet it adds only anonymous structures and unions that are nested within the 
  types listed above. </p>
  <div class="Footer">
    <p class="Dates">This page was created on 26th
    <a href="../../../../../../new/20/10.htm">October 2020</a> and was last modified 
    on 22nd February 2023. </p>
    <!--webbot bot="Include" U-Include="../../../_include/c2023.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020-2023. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="54423" -->
  </div>
</div>

</body>

</html>
