<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Functions</title>
<link rel="stylesheet" type="text/css" href="../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/msvc.css">
<script type="text/javascript" src="../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/msvc.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell - Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" i-checksum="22580" endspan -->
<!--webbot bot="Include" U-Include="../../_include/sketch.htm" TAG="BODY" startspan -->

<p class="alert">SKETCH OF HOW RESEARCH MIGHT CONTINUE AND RESULTS BE PRESENTED 
- PREVIEW ONLY </p>

<!--webbot bot="Include" i-checksum="42246" endspan -->
<h1>Functions </h1>
<p>The decorated name for a function has the general form: </p>
<blockquote>
  <p><span class="symbol">?</span><span class="placeholder"><a href="name.htm">name</a></span>[<span class="symbol">@</span>][<span class="placeholder">scope</span><span class="symbol">@</span>]<span class="symbol">@</span>&lt;<span class="placeholder">attributes</span>&gt;[<span class="placeholder">return</span>]&lt;<span class="placeholder">arguments</span>&gt;<span class="symbol">Z</span>
  </p>
</blockquote>
<h2>Attributes </h2>
<p>The <span class="placeholder">attributes</span> field is compound. Two fields 
are mandatory. Between them may be as many as three optional fields. The number 
and meaning is determined from the first field’s classification of the function 
as one of: </p>
<ul>
  <li>nonmember or static member </li>
  <li>nonstatic member or virtual member </li>
  <li>adjustor thunk </li>
  <li>vtordisp </li>
</ul>
<h3>Classification and Access Specifier </h3>
<p>In addition to classifying the function, the first field also shows the access 
specifier (except for nonmembers). </p>
<table>
  <tr>
    <th>Code </th>
    <th>Access Specifier </th>
    <th>Classification </th>
  </tr>
  <tr>
    <td><span class="symbol">$0</span> </td>
    <td>private </td>
    <td>vtordisp </td>
  </tr>
  <tr>
    <td><span class="symbol">$2</span> </td>
    <td>protected </td>
    <td>vtordisp </td>
  </tr>
  <tr>
    <td><span class="symbol">$4</span> </td>
    <td>public </td>
    <td>vtordisp </td>
  </tr>
  <tr>
    <td><span class="symbol">A</span> </td>
    <td>private </td>
    <td>member </td>
  </tr>
  <tr>
    <td><span class="symbol">C</span> </td>
    <td>private </td>
    <td>static member </td>
  </tr>
  <tr>
    <td><span class="symbol">E</span> </td>
    <td>private </td>
    <td>virtual member </td>
  </tr>
  <tr>
    <td><span class="symbol">G</span> </td>
    <td>private </td>
    <td>adjustor thunk </td>
  </tr>
  <tr>
    <td><span class="symbol">I</span> </td>
    <td>protected </td>
    <td>member </td>
  </tr>
  <tr>
    <td><span class="symbol">K</span> </td>
    <td>protected </td>
    <td>static member </td>
  </tr>
  <tr>
    <td><span class="symbol">M</span> </td>
    <td>protected </td>
    <td>virtual member </td>
  </tr>
  <tr>
    <td><span class="symbol">O</span> </td>
    <td>protected </td>
    <td>adjustor thunk </td>
  </tr>
  <tr>
    <td><span class="symbol">Q</span> </td>
    <td>public </td>
    <td>member </td>
  </tr>
  <tr>
    <td><span class="symbol">S</span> </td>
    <td>public </td>
    <td>static member </td>
  </tr>
  <tr>
    <td><span class="symbol">U</span> </td>
    <td>public </td>
    <td>virtual member </td>
  </tr>
  <tr>
    <td><span class="symbol">W</span> </td>
    <td>public </td>
    <td>adjustor thunk </td>
  </tr>
  <tr>
    <td><span class="symbol">Y</span> </td>
    <td>&nbsp;</td>
    <td>nonmember </td>
  </tr>
</table>
<h3>Displacement </h3>
<p>The vtordisp functions have two numerical attributes. </p>
<p class="alert">TO BE DONE </p>
<h3>Offset </h3>
<p>The adjustor thunk functions have one numerical field among their attributes.
</p>
<p class="alert">TO BE DONE </p>
<h3>This Qualifier </h3>
<p>Functions that have an implied <span class="keyword">this</span> argument, meaning 
all but static members and nonmembers, have a single-character field to show what 
qualifiers, if any, apply to <span class="keyword">this</span>. </p>
<h3>Calling Convention </h3>
<p class="alert">TO BE DONE </p>
<table border="1" cellspacing="1" cellpadding="10" id="AutoNumber2">
  <tr>
    <td><span class="symbol">A</span> </td>
    <td><span class="keyword">__cdecl</span> </td>
  </tr>
  <tr>
    <td><span class="symbol">C</span> </td>
    <td><span class="keyword">__pascal</span> </td>
  </tr>
  <tr>
    <td><span class="symbol">E</span> </td>
    <td><span class="keyword">__thiscall</span> </td>
  </tr>
  <tr>
    <td><span class="symbol">G</span> </td>
    <td><span class="keyword">__stdcall</span> </td>
  </tr>
  <tr>
    <td><span class="symbol">I</span> </td>
    <td><span class="keyword">__fastcall</span> </td>
  </tr>
  <tr>
    <td><span class="symbol">L</span> </td>
    <td><span class="keyword">__syscall</span> </td>
  </tr>
  <tr>
    <td><span class="symbol">M</span> </td>
    <td><span class="keyword">__clrcall</span> </td>
  </tr>
</table>
<p>Of the seven calling conventions known to the compiler, only
<span class="keyword">__cdecl</span>, <span class="keyword">__fastcall</span> and
<span class="keyword">__stdcall</span> are ordinarily accessible through keywords 
in the language. </p>
<p>The <span class="keyword">__thiscall</span> convention is internal, being inferred 
for nonstatic member functions that do not have a calling convention specified in 
their declarations. However, <span class="keyword">__thiscall</span> becomes a keyword 
under the action of the undocumented C1XX option <span class="switch">
<a href="../../cl/c1xx/options/binl.htm">-Binl</a></span>, when it can then be useful 
for making explicit that omission of a keyword for some other convention is not 
just an oversight, and be arguably even more useful for calls through a pointer 
to nonstatic member functions of arbitrary objects. </p>
<p>Although <span class="keyword">__pascal</span> and <span class="keyword">__syscall</span> 
are retained as keywords, they are obsolete and use of them triggers a warning (C4226) 
to say so. As a calling convention however, <span class="keyword">__pascal</span> 
is not quite so obsolete that support for it has yet been completely withdrawn. 
Compilation with the undocumented C1XX option <span class="switch">-Gc</span> causes
<span class="keyword">__pascal</span> to be inferred as the calling convention in 
default of any explicit specification or better inference. Incidentally, the compiler’s 
notion of this calling convention has it push arguments not from left to right as 
was long documented, but from right to left, as for <span class="keyword">__stdcall</span>.
</p>
<h2>Return Type </h2>
<p>Except if a function is a constructor or destructor, it has a return type shown 
in its decorated name. (Constructors and destructors are recognisable because their
<span class="placeholder">name</span> field is <span class="symbol">?0</span> or
<span class="symbol">?1</span> respectively.) </p>
<h2>Argument Types </h2>
<p class="alert">TO BE DONE </p>
<div class="Footer">
  <p class="Dates">This page was created on 6th March 2006 and was last modified 
  on 9th June 2009. </p>
  <!--webbot bot="Include" U-Include="../../_include/c0609.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2006-2009. Geoff Chappell. All rights reserved.
<a href="../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" i-checksum="58117" endspan -->
</div>

</body>

</html>
