<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Add Notification Event</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="42787" -->
<!--webbot bot="Include" U-Include="../../../../../_include/placeholder.htm" TAG="BODY" startspan -->

<div class="Header">
  <p class="alert">PLACEHOLDER FOR WORK THAT MAY NEVER BE DONE - PREVIEW ONLY </p>
</div>

<!--webbot bot="Include" endspan i-checksum="62046" -->
<h1>Add Notification Event </h1>
<p>When given 0x1B as its <span class="argument">FunctionCode</span> argument, the
<span class="function"><a href="index.htm">NtTraceControl</a></span> function tells 
the kernel of an event to signal whenever the process has a notification to retrieve 
(see function code 0x10). Microsoft’s name for this function code is not known. 
This note deals only with the function’s behaviour that is specific to this function 
code. The function’s general behaviour is here taken as assumed knowledge. </p>
<p>The input buffer must provide a handle to the event. Only 32 bits are provided 
for this handle even on 64-bit Windows. The function returns
<span class="constant">STATUS_INVALID_PARAMETER</span> if either: </p>
<ul>
  <li>the input buffer is not exactly 4 bytes; </li>
  <li>the 4 bytes are <span class="constant">NULL</span>. </li>
</ul>
<p>Each process can have only one such event, which is anyway just a refinement 
of an older mechanism for managing data for notifications. If this mechanism is 
already initialised, the function returns <span class="constant">STATUS_UNSUCCESSFUL</span>. 
Only now that it looks like the event can be added does the function check that 
the handle actually does represent an event object and grant
<span class="constant">EVENT_MODIFY_STATE</span> access. Failure is fatal to the 
function. If while checking the event and trying to accept it into use, the notification 
mechanism is meanwhile initialised by other means, the function forgets this event 
and returns <span class="constant">STATUS_ALREADY_REGISTERED</span>. </p>
<p><span class="alert">TO BE DONE?</span> </p>
<div class="Footer">
  <p class="Dates">This page was created on 22nd April 2020 from material first 
  published on 31st <a href="../../../../../../../../new/18/12.htm">December 2018</a>. 
  It was last modified on 28th <a href="../../../../../../../../new/20/05.htm">May 
  2020</a>. </p>
  <!--webbot bot="Include" U-Include="../../../../../_include/c1820.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2018-2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="14474" -->
</div>

</body>

</html>
