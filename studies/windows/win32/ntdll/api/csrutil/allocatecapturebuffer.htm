<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>CsrAllocateCaptureBuffer</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/win32.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/win32.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="54033" -->
<h1>CsrAllocateCaptureBuffer </h1>
<p>The <span class="function">CsrAllocateCaptureBuffer</span> function obtains a 
capture buffer such as can be sent as extra data with a message to the CSRSS server.
</p>
<h2>Declaration </h2>
<pre class="source">PVOID 
CsrAllocateCaptureBuffer (
    ULONG MaxMessagePointers, 
    ULONG Size);</pre>
<p>in version 5.0 and higher, but </p>
<pre class="source">PVOID 
CsrAllocateCaptureBuffer (
    ULONG MaxMessagePointers, 
    ULONG MaxCapturePointers, 
    ULONG Size);</pre>
<p>in versions 3.10 to 4.0. </p>
<h3>Parameters </h3>
<p>The <span class="argument">MaxMessagePointers</span> and
<span class="argument">MaxCapturePointers</span> arguments tell respectively how 
many message and capture pointers to allow for. Both types of pointers point into 
the capture buffer. Message pointers are in the message. Capture pointers are in 
the capture buffer. </p>
<p>The <span class="argument">Size</span> argument tells how many bytes to allow 
for allocations from within the capture buffer. </p>
<h3>Return Value </h3>
<p>The function returns the address of the allocated capture buffer, else it returns
<span class="constant">NULL</span> for failure. </p>
<p>The capture buffer begins with a <span class="struct">CSR_CAPTURE_HEADER</span> 
structure, but it is here thought that the function hides this as an implementation 
detail. The caller does not manipulate the structure but passes the returned address 
to other functions, e.g., <span class="function">
<a href="allocatecapturepointer.htm">CsrAllocateCapturePointer</a></span>,
<span class="function"><a href="allocatemessagepointer.htm">CsrAllocateMessagePointer</a></span> 
and <span class="function"><a href="capturemessagebuffer.htm">CsrCaptureMessageBuffer</a></span> 
for further work on the capture buffer, and eventually to <span class="function">
<a href="clientcallserver.htm">CsrClientCallServer</a></span> to include the capture 
buffer when sending a message to the server. </p>
<h2>Availability </h2>
<p>The <span class="function">CsrAllocateCaptureBuffer</span> function is exported 
by name from NTDLL.DLL in all known Windows versions, i.e., starting from version 
3.10. </p>
<h2>Documentation Status </h2>
<p>The <span class="function">CsrAllocateCaptureBuffer</span> function is not documented. 
Neither is Microsoft known to have disclosed a C-language declaration in any header 
from any publicly released kit for software development. </p>
<h2>Behaviour </h2>
<p><span class="alert">IN PROGRESS</span> </p>
<div class="Footer">
  <p class="Dates">This page was created on 25th
  <a href="../../../../../../new/19/06.htm">June 2019</a> and was last modified 
  on 26th June 2019. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c19.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2019. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="62933" -->
</div>

</body>

</html>
