<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Named Kernel Exports Added for Windows 10 Version 2004</title>
<link rel="stylesheet" type="text/css" href="../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/km.css">
<script type="text/javascript" src="../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="21016" -->
<h1>Named Kernel Exports Added for Windows 10 Version 2004 </h1>
<p>This page lists the functions and variables that are newly exported
<span class="emphasis">by name</span> from the Windows kernel in the 2004 release 
of Windows 10. </p>
<p>In terms of its formally exported interface, this 2004 release of the Windows 
kernel is very notable on two counts. First, it greatly expands the functionality 
that is exported only by ordinal. Before Windows 8, all the kernel’s exports were 
exported by name. These have ordinals, of course, but only incidentally. They are 
renumbered as exports are added and removed, and are therefore unreliable for importing. 
Windows 8 introduced two functions that are exported only by ordinal. With no name 
to specify when importing, these ordinals must be stable. Microsoft has long used 
ordinal-only exports in user-mode for functions that are in some sense even more 
than unusually undocumented. Successive releases of the kernel since Windows 8 have 
each added one or two or none. The 2004 release adds 15 to the
<a href="ords100.htm">Ordinal-Only Kernel Exports Added for Version 10.0</a>. None 
are documented. </p>
<p>Second, the x64 kernel in Version 2004 supersedes the x64 HAL. The latter is 
reduced to a stub. It continues to export functions but with no implementations 
in code. The HAL’s only continuing involvement with them is to name them in the 
Export Directory as forwards to the same-named functions in the kernel. These new 
kernel exports are distinguished below by “see HAL” as a direction for where to 
look up their history. Many, of course, were never documented as HAL exports.
</p>
<!--webbot bot="Include" U-Include="../../_include/colours.htm" TAG="BODY" startspan -->

<p>For the table below, documentation status is summarised by colour coding so that 
more detail can be given as Remarks with less text. (If you read this website with 
scripts enabled, then hovering the mouse over any coloured text will produce a tooltip 
that shows why the text is coloured.) Functions that have their own non-trivial 
documentation are shown with no background colour. If the function is documented 
as reserved or obsolete, it is <span class="reserved">shaded red</span> or
<span class="obsolete">shaded grey</span>, respectively. Functions that appear to 
be completely undocumented are <span class="undocumented">highlighted yellow</span>. 
If a function is documented now but was not documented in the first contemporaneous 
Device Driver Kit (DDK), Windows Driver Kit (WDK) or Installable File System (IFS) 
Kit, then it is <span class="delayed">shaded yellow</span> to retain some of its 
previous status. Many undocumented functions do at least have C-language declarations 
in one or another header file from the WDK. These are <span class="declared">shaded 
orange</span>, except for one special case. Some declarations are known only from 
“minwin” headers that Microsoft published in early editions of the WDK for Windows 
10 which seem since to have been withdrawn. These are <span class="minwin">highlighted 
orange</span> to indicate that public knowledge even of the declaration is exceptional.
</p>

<!--webbot bot="Include" endspan i-checksum="25498" -->
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks" span="3">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Export History </th>
    <th>Documentation History </th>
    <th>Declaration History </th>
  </tr>
  <tr>
    <td><span class="declared function">CcErrorCallbackRoutine</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="declared function">CcIsCacheManagerCallbackNeeded</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="undocumented function">CmRegisterMachineHiveLoadedNotification</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">CmUnregisterMachineHiveLoadedNotification</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">ExAllocatePool2</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">ExAllocatePool3</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">FsRtlCheckOplockEx2</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">FsRtlGetCurrentProcessLoaderList</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">FsRtlIs32BitProcess</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">FsRtlOplockGetAnyBreakOwnerProcess</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalAcpiGetTableEx</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">HalAcquireDisplayOwnership</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalAdjustResourceList</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalAllProcessorsStarted</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">HalAllocateAdapterChannel</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalAllocateCommonBuffer</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">HalAllocateCrashDumpRegisters</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">HalAllocateHardwareCounters</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalAssignSlotResources</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">
    <a href="../../hal/api/mcheck/halbugchecksystem.htm">HalBugCheckSystem</a></span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalCalibratePerformanceCounter</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalClearSoftwareInterrupt</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalConvertDeviceIdtToIrql</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalDisableInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalDisplayString</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">HalDmaAllocateCrashDumpRegistersEx
    </span></td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">HalDmaFreeCrashDumpRegistersEx </span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalEnableInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalEnumerateEnvironmentVariablesEx</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalEnumerateProcessors</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalFlushCommonBuffer</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalFreeCommonBuffer</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">HalFreeHardwareCounters</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalGetAdapter</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalGetBusData</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalGetBusDataByOffset</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalGetEnvironmentVariable</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalGetEnvironmentVariableEx</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalGetInterruptTargetInformation</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalGetInterruptVector</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalGetMemoryCachingRequirements</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalGetMessageRoutingInfo</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalGetProcessorIdByNtNumber</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalGetVectorInput</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalHandleMcheck</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalHandleNMI</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalInitSystem</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalInitializeBios</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalInitializeOnResume</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalInitializeProcessor</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalIsHyperThreadingEnabled</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">HalMakeBeep</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalPerformEndOfInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalProcessorIdle</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalQueryDisplayParameters</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalQueryEnvironmentVariableInfoEx</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalQueryMaximumProcessorCount</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalQueryRealTimeClock</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalReadDmaCounter</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalRegisterDynamicProcessor</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalRegisterErrataCallbacks</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalReportResourceUsage</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalRequestClockInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalRequestDeferredRecoveryServiceInterrupt</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalRequestIpi</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalRequestIpiSpecifyVector</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalRequestSoftwareInterrupt</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">HalReturnToFirmware</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalSendNMI</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalSendSoftwareInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalSetBusData</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalSetBusDataByOffset</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalSetDisplayParameters</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalSetEnvironmentVariable</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">HalSetEnvironmentVariableEx</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalSetProfileInterval</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalSetRealTimeClock</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalStartDynamicProcessor</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalStartNextProcessor</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalStartProfileInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalStopProfileInterrupt</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HalSystemVectorDispatchEntry</span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">HalTranslateBusAddress</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">HalWheaUpdateCmciPolicy</span> </td>
    <td>x64 only </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>Of the very many new exports whose names start with
<span class="functionprefix">Hal</span> only one, <span class="function">HalWheaUpdateCmciPolicy</span>, 
is truly new to Windows. All the others have earlier history as exports from the 
HAL. All, including the new one, continue to be exported from the x64 HAL but only 
as forwards to the kernel. Indeed, the x64 HAL in Version 2004 is nothing but a 
stub to support drivers that expect to import these functions from the HAL. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks" span="3">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Export History </th>
    <th>Documentation History </th>
    <th>Declaration History </th>
  </tr>
  <tr>
    <td><span class="undocumented function">HvlGetLpIndexFromProcessorIndex</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">HvlUpdatePerformanceStateCountersForLp</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">IoAcquireKsrPersistentMemory</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="function">IoCreateDeviceSecure</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">IoFlushAdapterBuffers</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">IoFreeAdapterChannel</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">IoFreeKsrPersistentMemory</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="obsolete function">IoFreeMapRegisters</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">IoMapTransfer</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">IoQueryKsrPersistentMemorySize</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="reserved function">IoReserveKsrPersistentMemory</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="reserved function">IoWriteKsrPersistentMemory</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
</table>
<p>Of the five new exports that support external work with persistent memory for 
the Kernel Soft Reboot (KSR) feature, only <span class="reserved function">IoAcquireKsrPersistentMemory</span> 
is formally documented as reserved but the others can’t sensibly be counted as anything 
else. The only way their pages in the documentation are any less insubstantial is 
that they don’t spell out “Reserved for system use” at the top. </p>
<p>Though <span class="function">IoCreateDeviceSecure</span> is new to the kernel 
as an exported function, it long had its own page of documentation among the I/O 
Manager Routines. In this earlier history, it is a routine for drivers to call from 
a statically linked library, named WDMSEC.LIB, which Microsoft introduced with the 
DDK for Windows XP SP1. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks" span="3">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Export History </th>
    <th>Documentation History </th>
    <th>Declaration History </th>
  </tr>
  <tr>
    <td><span class="undocumented variable">KdComPortInUse</span> (data) </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented variable">KdHvComPortInUse</span> (data) </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="reserved function">KeFlushWriteBuffer</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">KeQueryPerformanceCounter</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">KeStallExecutionProcessor</span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">MmAllocateMappingAddressEx</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>declared start is 1903 </td>
  </tr>
  <tr>
    <td><span class="function">MmGetPhysicalMemoryRangesEx2</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">MmMapMemoryDumpMdlEx</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">MmProtectDriverSection</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>A pattern seems to have set in with Microsoft’s presentation of Windows security 
features. The details aren’t formally documented, sometimes not even for years, 
but help is offered informally through blogs written by Microsoft staff. Desperate 
programmers and system administrators applaud the helpfulness, yet plainly it’s 
no substitute for properly documenting the feature. Here is an example in the kernel-mode 
API. The <span class="undocumented function">MmProtectDriverSection</span> helps 
drivers with a new feature named Kernel Data Protection, but Microsoft leaves driver 
writers to learn of the function from a blog. Search for it through Google: I’m 
not playing. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks" span="2">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Documentation History </th>
    <th>Declaration History </th>
  </tr>
  <tr>
    <td><span class="undocumented function">NtCreateCrossVmEvent</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">NtQueryInformationByName</span> </td>
    <td>documented start is 1703 </td>
    <td>declared start is 1703 </td>
  </tr>
  <tr>
    <td><span class="undocumented function">NtReadFileScatter</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">NtWriteFileGather</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>Documentation of <span class="function">NtQueryInformationByName</span>, certainly 
as I see it at Microsoft’s website today, 14th October 2020, is very plainly intended 
for kernel-mode use, what with its talk of IRQL and of kernel APCs. Even so, the 
function is not exported from the kernel until version 2004. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks" span="2">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Export History </th>
    <th>Documentation History </th>
  </tr>
  <tr>
    <td><span class="undocumented function">PsRegisterAltSystemCallHandler</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlConstructCrossVmMutexPath</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlFreeUTF8String</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlInitUTF8String</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlInitUTF8StringEx</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlIsZeroMemory</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlNormalizeSecurityDescriptor</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlNotifyFeatureUsage</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlQueryAllFeatureConfigurations</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlQueryFeatureConfiguration</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlQueryFeatureConfigurationChangeStamp</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlRegisterFeatureConfigurationChangeNotification</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlUTF8StringToUnicodeString</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlUnicodeStringToUTF8String</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">RtlUnregisterFeatureConfigurationChangeNotification</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="obsolete function">WheaAddErrorSourceDeviceDriverV1</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">WheaAddHwErrorReportSectionDeviceDriver</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">WheaCreateHwErrorReportDeviceDriver</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">WheaHwErrorReportAbandonDeviceDriver</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">WheaHwErrorReportGetLogDataBufferDeviceDriver</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">WheaHwErrorReportMarkAsCriticalDeviceDriver</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">WheaHwErrorReportSetFatalSeverityDeviceDriver</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">WheaHwErrorReportSetSectionNameDeviceDriver</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">WheaHwErrorReportSetSeverityDeviceDriver</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">WheaHwErrorReportSubmitDeviceDriver</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">WheaReportFatalHwErrorDeviceDriverEx</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="undocumented function">WheaReportHwErrorDeviceDriverEx</span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>The <span class="obsolete function">WheaAddErrorSourceDeviceDriverV1</span> function 
is odd for being documented both as obsolete (at the top) and as newly available 
(near the end). It is in fact the original <span class="delayed function">WheaAddErrorSourceDeviceDriver</span> 
with four arguments, as first exported from Version 1903. In effect,
<span class="function">WheaAddErrorSourceDeviceDriver</span> in Version 2004 and 
higher, with just three arguments, is a new function. In retaining the name, Microsoft 
created the first case of a documented kernel export changing its prototype incompatibly.
</p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Documentation History </th>
  </tr>
  <tr>
    <td><span class="undocumented function">ZwCreateCrossVmEvent</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ZwGetWriteWatch</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ZwResetWriteWatch</span> </td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>As with many <span class="functionprefix">Zw</span> functions,
<span class="minwin function">ZwGetWriteWatch</span> and
<span class="minwin function">ZwResetWriteWatch</span> have earlier history as user-mode 
exports from NTDLL.DLL. These date from Windows 2000 but stayed undocumented except 
for declarations in the ZWAPI.H header that Microsoft published only in early editions 
of the WDK for Windows 10. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks" span="2">
  </colgroup>
  <tr>
    <th>Name </th>
    <th>Export History </th>
    <th>Documentation History </th>
  </tr>
  <tr>
    <td><span class="undocumented function">
    <a href="../../hal/api/x86bios/allocatebuffer.htm">x86BiosAllocateBuffer</a></span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
  </tr>
  <tr>
    <td><span class="undocumented function">
    <a href="../../hal/api/x86bios/call.htm">x86BiosCall</a></span> </td>
    <td>x64 only </td>
    <td>see HAL </td>
  </tr>
  <tr>
    <td><span class="undocumented function">
    <a href="../../hal/api/x86bios/freebuffer.htm">x86BiosFreeBuffer</a></span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
  </tr>
  <tr>
    <td><span class="undocumented function">
    <a href="../../hal/api/x86bios/readmemory.htm">x86BiosReadMemory</a></span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
  </tr>
  <tr>
    <td><span class="undocumented function">
    <a href="../../hal/api/x86bios/writememory.htm">x86BiosWriteMemory</a></span>
    </td>
    <td>x64 only </td>
    <td>see HAL </td>
  </tr>
</table>
<div class="Footer">
  <p class="Dates">This page was created on 10th October 2020 but was not 
  published until 26th <a href="../../../../../new/20/10.htm">October 2020</a>. </p>
  <!--webbot bot="Include" U-Include="../../_include/c20.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="46495" -->
</div>

</body>

</html>
