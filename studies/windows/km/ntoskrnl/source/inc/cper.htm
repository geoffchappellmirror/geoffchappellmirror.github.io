<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>CPER.H</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="43332" -->
<h1>CPER.H </h1>
<p>The public symbol file NTKRPAMP.PDB for the original release of Windows 10 tells 
that the kernel is built with the CPER.H header at </p>
<blockquote>
  d:\th.public.fre\sdk\inc
</blockquote>
<p>and draws from it the type definitions that are tablulated below. </p>
<p>Nowadays, CPER.H is among the headers in the Software Development Kit (SDK) for 
Windows 10. It is there in the “um” subdirectory with many other headers that are 
intended only for user-mode programming. It dates from Windows 7, again in the SDK. 
CPER.H seems never to have been supplied with a Windows Driver Kit (WDK) except 
in bundles with the SDK. All its significant content is anyway duplicated in NTDDK.H 
and in NTOSP.H, but no sign is known of how this happens. </p>
<p>NTDDK.H is, of course, a standard header for kernel-mode programming, and NTOSP.H 
is similar but for Microsoft’s private use (notwithstanding its disclosure in two 
early editions of the WDK for Windows 10). The kernel’s own source code does not
<span class="directive">#include</span> either NTDDK.H or NTOSP.H. Of the definitions 
that these headers share with CPER.H, those that the kernel’s public symbols files 
also report for the kernel are there from including CPER.H. </p>
<p>Since CPER.H is published, it is readily seen that the user-defined types that 
the kernel’s public symbol files attribute to CPER.H are not all that are defined 
in CPER.H. Indeed, they are barely a quarter. In the table below, the line numbers 
on the left are from CPER.H as supplied with the SDK for the original Windows 10. 
Line numbers for types that don’t show in the public symbols are in parentheses. 
The line numbers on the right are from the NTDDK.H and NTOSP.H in the contemporaneous 
WDK. </p>
<table>
  <colgroup>
    <col class="LineNumber"><col class="Name"><col class="LineNumber" span="2">
  </colgroup>
  <tbody>
    <tr>
      <th>Line Number </th>
      <th>Type </th>
      <th>NTDDK.H </th>
      <th>NTOSP.H </th>
    </tr>
    <tr>
      <td>134 </td>
      <td>union <span class="union">_WHEA_REVISION</span> </td>
      <td>14688 </td>
      <td>49605 </td>
    </tr>
    <tr>
      <td>142 </td>
      <td>enum <span class="enum">_WHEA_ERROR_SEVERITY</span> </td>
      <td>14696 </td>
      <td>49613 </td>
    </tr>
    <tr>
      <td>149 </td>
      <td>union <span class="union">_WHEA_TIMESTAMP</span> </td>
      <td>14703 </td>
      <td>49620 </td>
    </tr>
    <tr>
      <td>164 </td>
      <td>union <span class="union">_WHEA_PERSISTENCE_INFO</span> </td>
      <td>14718 </td>
      <td>49635 </td>
    </tr>
    <tr>
      <td>195 </td>
      <td>union <span class="union">_WHEA_ERROR_STATUS</span> </td>
      <td>14749 </td>
      <td>49666 </td>
    </tr>
    <tr>
      <td>213 </td>
      <td>union <span class="union">_WHEA_ERROR_RECORD_HEADER_VALIDBITS</span>
      </td>
      <td>14767 </td>
      <td>49684 </td>
    </tr>
    <tr>
      <td>227 </td>
      <td>union <span class="union">_WHEA_ERROR_RECORD_HEADER_FLAGS</span> </td>
      <td>14781 </td>
      <td>49698 </td>
    </tr>
    <tr>
      <td>241 </td>
      <td>struct <span class="struct">_WHEA_ERROR_RECORD_HEADER</span> </td>
      <td>14795 </td>
      <td>49712 </td>
    </tr>
    <tr>
      <td>296 </td>
      <td>union <span class="union">_WHEA_ERROR_RECORD_SECTION_DESCRIPTOR_FLAGS</span>
      </td>
      <td>14850 </td>
      <td>49767 </td>
    </tr>
    <tr>
      <td>317 </td>
      <td>union <span class="union">_WHEA_ERROR_RECORD_SECTION_DESCRIPTOR_VALIDBITS</span>
      </td>
      <td>14871 </td>
      <td>49788 </td>
    </tr>
    <tr>
      <td>327 </td>
      <td>struct <span class="struct">_WHEA_ERROR_RECORD_SECTION_DESCRIPTOR</span>
      </td>
      <td>14881 </td>
      <td>49798 </td>
    </tr>
    <tr>
      <td>367 </td>
      <td>struct <span class="struct">_WHEA_ERROR_RECORD</span> </td>
      <td>14921 </td>
      <td>49838 </td>
    </tr>
    <tr>
      <td>(406) </td>
      <td>union <span class="union">_WHEA_PROCESSOR_FAMILY_INFO</span> </td>
      <td>14960 </td>
      <td>49877 </td>
    </tr>
    <tr>
      <td>(421) </td>
      <td>union <span class="union">_WHEA_PROCESSOR_GENERIC_ERROR_SECTION_VALIDBITS</span>
      </td>
      <td>14975 </td>
      <td>49892 </td>
    </tr>
    <tr>
      <td>(442) </td>
      <td>struct <span class="struct">_WHEA_PROCESSOR_GENERIC_ERROR_SECTION</span>
      </td>
      <td>14996 </td>
      <td>49913 </td>
    </tr>
    <tr>
      <td>(516) </td>
      <td>union <span class="union">_WHEA_XPF_CACHE_CHECK</span> </td>
      <td>15070 </td>
      <td>49987 </td>
    </tr>
    <tr>
      <td>(558) </td>
      <td>union <span class="union">_WHEA_XPF_TLB_CHECK</span> </td>
      <td>15112 </td>
      <td>50029 </td>
    </tr>
    <tr>
      <td>(609) </td>
      <td>union <span class="union">_WHEA_XPF_BUS_CHECK</span> </td>
      <td>15163 </td>
      <td>50080 </td>
    </tr>
    <tr>
      <td>(651) </td>
      <td>union <span class="union">_WHEA_XPF_MS_CHECK</span> </td>
      <td>15205 </td>
      <td>50122 </td>
    </tr>
    <tr>
      <td>(676) </td>
      <td>union <span class="union">_WHEA_XPF_PROCINFO_VALIDBITS</span> </td>
      <td>15230 </td>
      <td>50147 </td>
    </tr>
    <tr>
      <td>(688) </td>
      <td>struct <span class="struct">_WHEA_XPF_PROCINFO</span> </td>
      <td>15242 </td>
      <td>50159 </td>
    </tr>
    <tr>
      <td>(708) </td>
      <td>struct <span class="struct">_WHEA_X86_REGISTER_STATE</span> </td>
      <td>15262 </td>
      <td>50179 </td>
    </tr>
    <tr>
      <td>(736) </td>
      <td>struct <span class="struct">_WHEA128A</span> </td>
      <td>15290 </td>
      <td>50207 </td>
    </tr>
    <tr>
      <td>(748) </td>
      <td>struct <span class="struct">_WHEA_X64_REGISTER_STATE</span> </td>
      <td>15302 </td>
      <td>50219 </td>
    </tr>
    <tr>
      <td>(801) </td>
      <td>struct <span class="struct">_WHEA_XPF_CONTEXT_INFO</span> </td>
      <td>15355 </td>
      <td>50272 </td>
    </tr>
    <tr>
      <td>(817) </td>
      <td>union <span class="union">_WHEA_XPF_PROCESSOR_ERROR_SECTION_VALIDBITS</span>
      </td>
      <td>15371 </td>
      <td>50288 </td>
    </tr>
    <tr>
      <td>(829) </td>
      <td>struct <span class="struct">_WHEA_XPF_PROCESSOR_ERROR_SECTION</span>
      </td>
      <td>15383 </td>
      <td>50300 </td>
    </tr>
    <tr>
      <td>943 </td>
      <td>union <span class="union">_WHEA_MEMORY_ERROR_SECTION_VALIDBITS</span>
      </td>
      <td>15497 </td>
      <td>50414 </td>
    </tr>
    <tr>
      <td>980 </td>
      <td>struct <span class="struct">_WHEA_MEMORY_ERROR_SECTION</span> </td>
      <td>15534 </td>
      <td>50451 </td>
    </tr>
    <tr>
      <td>(1037) </td>
      <td>union <span class="union">_WHEA_PCIEXPRESS_ERROR_SECTION_VALIDBITS</span>
      </td>
      <td>15591 </td>
      <td>50508 </td>
    </tr>
    <tr>
      <td>(1053) </td>
      <td>struct <span class="struct">_WHEA_PCIEXPRESS_DEVICE_ID</span> </td>
      <td>15607 </td>
      <td>50524 </td>
    </tr>
    <tr>
      <td>(1067) </td>
      <td>union <span class="union">_WHEA_PCIEXPRESS_VERSION</span> </td>
      <td>15621 </td>
      <td>50538 </td>
    </tr>
    <tr>
      <td>(1076) </td>
      <td>union <span class="union">_WHEA_PCIEXPRESS_COMMAND_STATUS</span> </td>
      <td>15630 </td>
      <td>50547 </td>
    </tr>
    <tr>
      <td>(1084) </td>
      <td>union <span class="union">_WHEA_PCIEXPRESS_BRIDGE_CONTROL_STATUS</span>
      </td>
      <td>15638 </td>
      <td>50555 </td>
    </tr>
    <tr>
      <td>(1093) </td>
      <td>enum <span class="enum">_WHEA_PCIEXPRESS_DEVICE_TYPE</span> </td>
      <td>15647 </td>
      <td>50564 </td>
    </tr>
    <tr>
      <td>(1105) </td>
      <td>struct <span class="struct">_WHEA_PCIEXPRESS_ERROR_SECTION</span> </td>
      <td>15659 </td>
      <td>50576 </td>
    </tr>
    <tr>
      <td>(1156) </td>
      <td>union <span class="union">_WHEA_PCIXBUS_ERROR_SECTION_VALIDBITS</span>
      </td>
      <td>15710 </td>
      <td>50627 </td>
    </tr>
    <tr>
      <td>(1172) </td>
      <td>union <span class="union">_WHEA_PCIXBUS_ID</span> </td>
      <td>15726 </td>
      <td>50643 </td>
    </tr>
    <tr>
      <td>(1180) </td>
      <td>union <span class="union">_WHEA_PCIXBUS_COMMAND</span> </td>
      <td>15734 </td>
      <td>50651 </td>
    </tr>
    <tr>
      <td>(1189) </td>
      <td>struct <span class="struct">_WHEA_PCIXBUS_ERROR_SECTION</span> </td>
      <td>15743 </td>
      <td>50660 </td>
    </tr>
    <tr>
      <td>(1228) </td>
      <td>union <span class="union">_WHEA_PCIXDEVICE_ERROR_SECTION_VALIDBITS</span>
      </td>
      <td>15782 </td>
      <td>50669 </td>
    </tr>
    <tr>
      <td>(1241) </td>
      <td>struct <span class="struct">_WHEA_PCIXDEVICE_ID</span> </td>
      <td>15795 </td>
      <td>50712 </td>
    </tr>
    <tr>
      <td>(1253) </td>
      <td>struct <span class="struct">WHEA_PCIXDEVICE_REGISTER_PAIR</span> </td>
      <td>15807 </td>
      <td>50724 </td>
    </tr>
    <tr>
      <td>(1258) </td>
      <td>struct <span class="struct">_WHEA_PCIXDEVICE_ERROR_SECTION</span> </td>
      <td>15812 </td>
      <td>50729 </td>
    </tr>
    <tr>
      <td>(1288) </td>
      <td>struct <span class="struct">_WHEA_FIRMWARE_ERROR_RECORD_REFERENCE</span>
      </td>
      <td>15842 </td>
      <td>50759 </td>
    </tr>
    <tr>
      <td>(1314) </td>
      <td>union <span class="union">_MCG_STATUS</span> </td>
      <td>15868 </td>
      <td>50785 </td>
    </tr>
    <tr>
      <td>(1325) </td>
      <td>union <span class="union">_MCI_STATUS</span> </td>
      <td>15879 </td>
      <td>50796 </td>
    </tr>
    <tr>
      <td>(1343) </td>
      <td>enum <span class="enum">_WHEA_CPU_VENDOR</span> </td>
      <td>15897 </td>
      <td>50814 </td>
    </tr>
    <tr>
      <td>(1352) </td>
      <td>struct <span class="struct">_WHEA_XPF_MCA_SECTION</span> </td>
      <td>15906 </td>
      <td>50823 </td>
    </tr>
    <tr>
      <td>(1370) </td>
      <td>union <span class="union">_WHEA_NMI_ERROR_SECTION_FLAGS</span> </td>
      <td>15924 </td>
      <td>50841 </td>
    </tr>
    <tr>
      <td>(1378) </td>
      <td>struct <span class="struct">_WHEA_NMI_ERROR_SECTION</span> </td>
      <td>15932 </td>
      <td>50849 </td>
    </tr>
  </tbody>
</table>
<p>For the record, lines 41 to 1384 inclusive of the 1391-line CPER.H are duplicated 
as lines 14595 to 15938 of NTDDK.H and 49512 to 50855 of NTOSP.H. In both these 
standard headers, the definitions they share with CPER.H immediately follow those 
from WHEADEF.H. The difference apparently doesn’t matter but when building the kernel—or, 
to be precise, when compiling the separate source file <a href="../ntsym.htm">ntsym.c</a> 
for merging type information into the kernel’s public symbols—the CPER.H definitions 
come first. </p>
<div class="Footer">
  <p class="Dates">This page was created on 2nd
  <a href="../../../../../../new/20/11.htm">November 2020</a> and was last modified 
  on 12th <a href="../../../../../../new/23/02.htm">February 2023</a>. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c2023.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020-2023. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="54423" -->
</div>

</body>

</html>
