<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>New and Updated in May 2020</title>
<link rel="stylesheet" type="text/css" href="../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/tree.css">
<script type="text/javascript" src="../../_scripts/master.js"></script>
<script type="text/javascript" src="../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/tree.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript Header" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="14880" -->
<div class="Main">
  <h1>New and Updated in May 2020 </h1>
  <p>After a long break both for paid work and to move house, what do I take up? 
  Yes, Event Tracing for Windows! </p>
  <p>Regular readers will know ETW as a long-held interest that I keep returning 
  to every few years. Some measure of how long-held is that I resurrect some previously 
  unpublished notes from 2008. It’s not certainly clear to me why I left any of 
  this unpublished—at all, let alone for so long. One of them was both sufficiently 
  correct and complete for publication, albeit only of how things stood for Windows 
  Vista. Apparently I put it aside for lack of having a deserving place for it. 
  The <a href="../../studies/windows/km/index.htm">Kernel</a> section of the site 
  did not yet exist, but plainly this page was for programmers and did not belong 
  in the <a href="../../notes/index.htm">Notes</a>. That’s where the roughly contemporaneous
  <a href="../../notes/windows/etw/security.htm">Event Trace Security</a> has languished 
  all these years. Though that page <span class="emphasis">was</span> written for 
  users, it always did deserve more attention than the quick write-up I gave it 
  in 2008. I have now reworked it: the old page is retired. </p>
  <p>Very plausibly, I am now letting the pendulum swing too far in the opposite 
  direction: unhappy at seeing how much work I started on ETW well over a decade 
  ago only to leave it unpublished, I am now presenting even very rough material. 
  My inevitable unhappiness with this extreme may, if nothing else, keep prodding 
  me to keep revisiting all this rough work to bring it up to some reasonable quality. 
  If only I had time! </p>
  <p>What’s really damning is that even any, let alone much, of this rough work 
  from 2008 has details that are still new to the Internet. It just should not be 
  possible that material I’ve left to go moldy at the bottom of a virtual desk drawer 
  for a decade can have any sense of being new. But please don’t mistake that I 
  call damnation on Microsoft. They do surely deserve some for keeping so much ETW 
  functionality as special to their diagnostic tools instead of being available 
  for a market in third-party tools, but what I damn is a whole industry that meekly 
  or ignorantly lets this happen. </p>
  <h2>Kernel Mode </h2>
  <div class="Tree">
    <ul>
      <li class="Expanded Branch">Kernel
      <ul>
        <li class="Expanded Branch">API
        <ul>
          <li class="Expanded Branch">Event Tracing for Windows
          <ul>
            <li class="Expanded Branch">Notifications
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/notify/data_source.htm">ETW_DATA_SOURCE</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/notify/queue_entry.htm">ETW_QUEUE_ENTRY</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/notify/notification_header.htm">ETWP_NOTIFICATION_HEADER</a> </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Provider Traits
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/provtraits/provider_traits.htm">ETW_PROVIDER_TRAITS</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Registration
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/register.htm">EtwRegister</a> (new but old) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/registerclassicprovider.htm">EtwRegisterClassicProvider</a> (new) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/guid_entry.htm">ETW_GUID_ENTRY</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/hash_bucket.htm">ETW_HASH_BUCKET</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/provider_table_entry.htm">ETW_PROVIDER_TABLE_ENTRY</a> (new) </li>
                <li class="Expanded Branch"><a href="../../studies/windows/km/ntoskrnl/api/etw/register/reg_entry/index.htm">ETW_REG_ENTRY</a>
                <ul>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/reg_entry/flags.htm">Flags</a> </li>
                </ul>
                </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/reply_queue.htm">ETW_REPLY_QUEUE</a> (new) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Enumerations
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/guid_type.htm">ETW_GUID_TYPE</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li><a href="../../studies/windows/km/ntoskrnl/api/etw/secure/index.htm">Security</a> </li>
            <li class="Expanded Branch">Trace API
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li class="Expanded Branch"><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/index.htm">NtTraceControl</a>
                <ul>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/createactivityid.htm">EtwActivityIdCreate</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/flushtrace.htm">EtwFlushLoggerCode</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/querytrace.htm">EtwQueryLoggerCode</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/starttrace.htm">EtwStartLoggerCode</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/stoptrace.htm">EtwStopLoggerCode</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/updatetrace.htm">EtwUpdateLoggerCode</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/wdidispatchcontrol.htm">EtwWdiScenarioCode</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/wdisemupdate.htm">EtwWdiUpdateSem</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/addnotificationevent.htm">Add Notification Event</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/enumeratetraceguids.htm">Enumerate Trace GUIDs</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/getdisallowlist.htm">Get Disallow List</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/gettracegroupinfo.htm">Get Trace Group Information</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/gettracegrouplist.htm">Get Trace Group List</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/gettraceguidinfo.htm">Get Trace GUID Information</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/gettraceguidlist.htm">Get Trace GUID List</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/sendnotification.htm">Notify GUID</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/queryreferencetime.htm">Query Reference Time</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/realtimeconnect.htm">Real Time Connect</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/realtimedisconnectconsumerbyhandle.htm">Real Time Disconnect</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/receivenotification.htm">Receive Notification</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/receivereplydatablock.htm">Receive Reply Data Block</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/registersecurityprovider.htm">Register Security Provider</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/registerumguid.htm">Register User Mode GUID</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/sendreplydatablock.htm">Send Reply Data Block</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/setprovidertraitsum.htm">Set Provider Traits</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/trackproviderbinary.htm">Track Provider Binary</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/updatedisallowlist.htm">Update Disallow List</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/usedescriptortypeum.htm">Use Descriptor Type</a> </li>
                </ul>
                </li>
              </ul>
              </li>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/notification_header.htm">ETW_NOTIFICATION_HEADER</a> </li>
                <li class="Expanded Branch"><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/wmi_logger_information/index.htm">WMI_LOGGER_INFORMATION</a>
                <ul>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/wmi_logger_information/logfilemode.htm">LogFileMode</a> (new) </li>
                </ul>
                </li>
              </ul>
              </li>
              <li class="Expanded Branch">Enumerations
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/notification_type.htm">ETW_NOTIFICATION_TYPE</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Trace Support
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracesup/trace_enable_flag_extension.htm">TRACE_ENABLE_FLAG_EXTENSION</a> (new) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Implementation
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracesup/silodriverstate.htm">ETW_SILODRIVERSTATE</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
          </ul>
          </li>
          <li class="Expanded Branch">Run Time Library
          <ul>
            <li class="Expanded Branch">NLS
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/nls/copyunicodestring.htm">RtlCopyUnicodeString</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Red-Black Trees
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/rbtree/rbinsertnodeex.htm">RtlRbInsertNodeEx</a> (new) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/inc/shared/rtlrbtree/rtl_avl_tree.htm">RTL_AVL_TREE</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/inc/shared/ntdef/rtl_balanced_node.htm">RTL_BALANCED_NODE</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/inc/shared/rtlrbtree/rtl_rb_tree.htm">RTL_RB_TREE</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Registry Utilities
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/regutil/formatcurrentuserkeypath.htm">RtlFormatCurrentUserKeyPath</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Security
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/sertl/convertsidtounicodestring.htm">RtlConvertSidToUnicodeString</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/sertl/lengthrequiredsid.htm">RtlLengthRequiredSid</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/sertl/lengthsid.htm">RtlLengthSid</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/sertl/validsid.htm">RtlValidSid</a> (new) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/rtl/sertl/sid.htm">SID</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>
      </li>
    </ul>
  </div>
  <h2>Win32 </h2>
  <div class="Tree">
    <ul>
      <li class="Expanded Branch">NTDLL
      <ul>
        <li class="Expanded Branch">API
        <ul>
          <li class="Expanded Branch">Event Tracing
          <ul>
            <li class="Expanded Branch">Event API
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/notificationregister.htm">EtwNotificationRegister</a> </li>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/write.htm">EtwEventWrite</a> (new) </li>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/writeex.htm">EtwEventWriteEx</a> (new) </li>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/writefull.htm">EtwEventWriteFull</a> </li>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/writenoregistration.htm">EtwEventWriteNoRegistration</a> (new) </li>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/writetransfer.htm">EtwEventWriteTransfer</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Event Support
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/evntsup/registration_entry.htm">ETW_REGISTRATION_ENTRY</a> (new) </li>
              </ul>
              </li>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/evntsup/reghandle.htm">The User-Mode REGHANDLE</a> (new) </li>
            </ul>
            </li>
            <li class="Expanded Branch">Notifications
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/notify/send.htm">EtwSendNotification</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">User-Mode Logger
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/win32/ntdll/api/etw/umlog/um_logger_context/index.htm">ETW_UM_LOGGER_CONTEXT</a> </li>
              </ul>
              </li>
            </ul>
            </li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>
      </li>
      <li class="Expanded Branch">ADVAPI32
      <ul>
        <li class="Expanded Branch">API
        <ul>
          <li class="Expanded Branch">Event Tracing
          <ul>
            <li class="Expanded Branch">Logging API
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/win32/advapi32/api/etw/logapi/starttrace.htm">StartTrace</a> (new but old) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/win32/advapi32/api/etw/logapi/event_trace_properties.htm">EVENT_TRACE_PROPERTIES</a> (new but old) </li>
              </ul>
              </li>
            </ul>
            </li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>
      </li>
    </ul>
  </div>
  <div class="Footer">
    <!--webbot bot="Include" U-Include="../../_include/c20.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020. Geoff Chappell. All rights reserved.  
<a href="../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="39716" -->
  </div>
</div>

</body>

</html>
