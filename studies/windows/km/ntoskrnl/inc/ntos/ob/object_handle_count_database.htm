<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>OBJECT_HANDLE_COUNT_DATABASE</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="48540" -->
<div class="Main">
  <h1>OBJECT_HANDLE_COUNT_DATABASE </h1>
  <p>The <span class="struct">OBJECT_HANDLE_COUNT_DATABASE</span> structure (formally
  <span class="struct">_OBJECT_HANDLE_COUNT_DATABASE</span>) for any one object 
  tells which processes have how many handles open to the object. This database 
  is created only when the object is first opened concurrently by at least two processes. 
  Its address is then kept in the <span class="struct">
  <a href="object_header_handle_info.htm">OBJECT_HEADER_HANDLE_INFO</a></span> as 
  its <span class="member">HandleCountDataBase</span> member. </p>
  <h2>Layout </h2>
  <p>The <span class="struct">OBJECT_HANDLE_COUNT_DATABASE</span> is 0x0C or 0x18 
  bytes in 32-bit and 64-bit Windows, respectively. Microsoft’s names and types 
  are known from type information in public symbol files for the kernel, starting 
  with Windows 2003 SP1. That these names apply at least as far back as version 
  4.0 is known with slightly less certainty from the output of the
  <span class="command"><a href="../../../../debug/userexts/dso.htm">!dso</a></span> 
  command as implemented by the debugger extension USEREXTS.DLL from the Windows 
  NT 4.0 Device Driver Kit (DDK). </p>
  <table class="Struct">
    <colgroup>
      <col class="Offset" span="2"><col class="Definition"><col class="Versions">
    </colgroup>
    <thead>
      <tr>
        <th>Offset (x86) </th>
        <th>Offset (x64) </th>
        <th>Definition </th>
        <th>Versions </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0x00 </td>
        <td>0x00 </td>
        <td>
        <pre class="source">ULONG CountEntries;</pre>
        </td>
        <td>3.50 and higher </td>
      </tr>
      <tr>
        <td>0x04 </td>
        <td>0x08 </td>
        <td>
        <pre class="source"><a href="object_handle_count_entry.htm">OBJECT_HANDLE_COUNT_ENTRY</a> HandleCountEntries [ANYSIZE_ARRAY];</pre>
        </td>
        <td>3.50 and higher </td>
      </tr>
    </tbody>
  </table>
  <div class="Footer">
    <p class="Dates">This page was created on 23rd
    <a href="../../../../../../../new/22/07.htm">August 2022</a> from material first 
    published on 30th <a href="../../../../../../../new/20/06.htm">June 2020</a>.
    It was last modified on 31st August 2022. </p>
    <!--webbot bot="Include" U-Include="../../../../_include/c2022.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020-2022. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="4221" -->
  </div>
</div>

</body>

</html>
