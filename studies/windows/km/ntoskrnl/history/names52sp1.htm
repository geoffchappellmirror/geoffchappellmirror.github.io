<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Kernel Exports Added for Windows Server 2003 SP1</title>
<link rel="stylesheet" type="text/css" href="../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/km.css">
<script type="text/javascript" src="../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="21016" -->
<h1>Kernel Exports Added for Windows Server 2003 SP1 </h1>
<p>The table below lists the 50 functions that are first exported by the Windows 
kernel in the version 5.2 from Windows Server 2003 SP1. Two more are listed as
<a href="names51sp3.htm">additions for Windows XP SP3</a> because the latter has 
the lower version number. All these added functions are still exported as of version 
10.0, except that one was discontinued in 6.3. These additions represent by far 
the largest expansion of the kernel’s exported functionality for any service-pack 
release in the history of Windows. Indeed, more functions were added for Windows 
Server 2003 SP1 than for the original Windows Server 2003. An explanation is that 
this is the first Windows version (known to this study) that has an x64 build. Many 
of the new functions are exported only from x64 builds. </p>
<!--webbot bot="Include" U-Include="_include/colours.htm" TAG="BODY" startspan -->

<p>Documentation status is summarised by colour coding so that more detail can be 
given as Remarks with less text. Functions that have their own non-trivial documentation 
are shown with no background colour. If the function is documented as reserved or 
obsolete, with or without a prototype, it is <span class="reserved">shaded red</span> 
or <span class="obsolete">shaded grey</span>, respectively. An undocumented function 
that is at least declared in one or another header file from the Windows Driver 
Kit (WDK) is <span class="declared">shaded orange</span>. If the only declaration 
that Microsoft is known to have disclosed publicly is from the “minwin” directory 
of the Enterprise WDK for Windows 10 version 1511, specifically, then the function 
is <span class="minwin">highlighted orange</span>. Functions that appear to be completely 
undocumented are <span class="undocumented">highlighted yellow</span>. If a function 
is documented now but is known not to have been documented in the first contemporaneous 
Device Driver Kit (DDK), WDK or Installable File System (IFS) Kit, then it is
<span class="delayed">shaded yellow</span> to retain some of its previous status 
as undocumented. </p>

<!--webbot bot="Include" endspan i-checksum="44802" -->
<p>Barely a quarter of the new functions are documented. For only a few does the 
documentation state the applicable versions as beginning with Windows Server 2003 
SP1 specifically. Unusually, one function that is documented is not declared in 
any WDK header file. Another half of the functions are not documented but do at 
least get declared in one or another WDK header file. Declarations, both of these 
and the documented functions, are mostly for Windows Server 2003 SP1 and higher, 
but some have no version constraint at all, and one dates the function to Windows 
XP. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks">
  </colgroup>
  <tr>
    <th>Function </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td><span class="function">ExAcquireFastMutex</span> </td>
    <td>x64 only; <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="declared function">ExAcquireRundownProtectionCacheAware</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExAcquireRundownProtectionCacheAwareEx</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExAllocateCacheAwareRundownProtection</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ExEnterCriticalRegionAndAcquireFastMutexUnsafe</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExEnterCriticalRegionAndAcquireResourceExclusive</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExEnterCriticalRegionAndAcquireResourceShared</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExEnterCriticalRegionAndAcquireSharedWaitForExclusive</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExFreeCacheAwareRundownProtection</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExInitializeRundownProtectionCacheAware</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">ExQueryDepthSList</span> </td>
    <td>x64 only; <br>
    conditionally defined inline; <br>
    supported (and long documented) for x86 by macro definition </td>
  </tr>
  <tr>
    <td><span class="declared function">ExReInitializeRundownProtectionCacheAware</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">ExReleaseFastMutex</span> </td>
    <td>x64 only; <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="minwin function">ExReleaseFastMutexUnsafeAndLeaveCriticalRegion</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExReleaseResourceAndLeaveCriticalRegion</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExReleaseRundownProtectionCacheAware</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExReleaseRundownProtectionCacheAwareEx</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExRundownCompletedCacheAware</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExSizeOfRundownProtectionCacheAware</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">ExTryToAcquireFastMutex</span> </td>
    <td>x64 only; <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="declared function">ExWaitForRundownProtectionReleaseCacheAware</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ExfReleasePushLockExclusive</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ExfReleasePushLockShared</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ExfTryToWakePushLock</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">ExiAcquireFastMutex</span> </td>
    <td>x86 only </td>
  </tr>
  <tr>
    <td><span class="declared function">ExiReleaseFastMutex</span> </td>
    <td>x86 only </td>
  </tr>
  <tr>
    <td><span class="declared function">ExiTryToAcquireFastMutex</span> </td>
    <td>x86 only </td>
  </tr>
  <tr>
    <td><span class="declared function">ExpInterlockedFlushSList</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="declared function">ExpInterlockedPopEntrySList</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="declared function">ExpInterlockedPushEntrySList</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="function">InitializeSListHead</span> </td>
    <td>x64 only; <br>
    defined inline for x86; <br>
    also exported from KERNEL32 version 5.1 and higher; <br>
    documentation is in SDK for KERNEL32, and requires Windows XP and higher
    </td>
  </tr>
  <tr>
    <td><span class="function">IoIs32bitProcess</span> </td>
    <td>x64 only; <br>
    documented before available, at least as early as 2002 </td>
  </tr>
  <tr>
    <td><span class="declared function">IoTranslateBusAddress</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">IoWMIDeviceObjectToProviderId</span> </td>
    <td>x64 only; <br>
    documented before available, at least as early as 2000; <br>
    supported for x86 by macro </td>
  </tr>
  <tr>
    <td><span class="declared function">KdChangeOption</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">KdSystemDebugControl</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">KeAcquireGuardedMutex</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeAcquireGuardedMutexUnsafe</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeAcquireInStackQueuedSpinLock</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.1 and higher </td>
  </tr>
  <tr>
    <td><span class="undocumented function">KeAcquireInStackQueuedSpinLockRaiseToSynch</span>
    </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.1 and higher </td>
  </tr>
  <tr>
    <td><span class="reserved function">KeAcquireQueuedSpinLock</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.0 and higher </td>
  </tr>
  <tr>
    <td><span class="undocumented function">KeAcquireQueuedSpinLockRaiseToSynch</span>
    </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.0 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeAcquireSpinLockRaiseToDpc</span> </td>
    <td>x64 only; <br>
    declaration requires Windows 2000 and higher </td>
  </tr>
  <tr>
    <td><span class="reserved function">KeAcquireSpinLockRaiseToSynch</span>
    </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 4.0 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeAreAllApcsDisabled</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeEnterGuardedRegion</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="delayed function">KeExpandKernelStackAndCallout</span> </td>
    <td>x64-only in 5.2; <br>
    undocumented until 2005-2006 </td>
  </tr>
  <tr>
    <td><span class="function">KeGetCurrentIrql</span> </td>
    <td>x64 only; <br>
    defined inline to read <span class="register">cr8</span>; <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeInitializeCrashDumpHeader</span> </td>
    <td>not declared </td>
  </tr>
  <tr>
    <td><span class="function">KeInitializeGuardedMutex</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="minwin function">KeIsWaitListEmpty</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared variable">KeLastBranchMSR</span> (data) </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="function">KeLeaveGuardedRegion</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeLowerIrql</span> </td>
    <td>x64 only; <br>
    defined inline to write <span class="register">cr8</span>; <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="undocumented function">KeQueryMultiThreadProcessorSet</span>
    </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="minwin function">KeQueryPrcbAddress</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="function">KeRaiseIrqlToDpcLevel</span> </td>
    <td>x64 only; <br>
    supported for x86 as export from HAL version 4.0 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeReleaseGuardedMutex</span> </td>
    <td>documentation requires Windows Server 2003 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeReleaseGuardedMutexUnsafe</span> </td>
    <td>documentation requires Windows Server 2003 and higher <br>
    </td>
  </tr>
  <tr>
    <td><span class="function">KeReleaseInStackQueuedSpinLock</span> </td>
    <td>x64 only; <br>
    supported for x86 as export from HAL version 5.1 and higher </td>
  </tr>
  <tr>
    <td><span class="reserved function">KeReleaseQueuedSpinLock</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.0 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeReleaseSpinLock</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeTryToAcquireGuardedMutex</span> </td>
    <td>documentation requires Windows Server 2003 and higher <br>
    </td>
  </tr>
  <tr>
    <td><span class="reserved function">KeTryToAcquireQueuedSpinLock</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.0 and higher </td>
  </tr>
  <tr>
    <td><span class="undocumented function">KeTryToAcquireQueuedSpinLockRaiseToSynch</span>
    </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher; <br>
    supported for x86 as export from HAL version 5.0 and higher </td>
  </tr>
  <tr>
    <td><span class="function">KeTryToAcquireSpinLockAtDpcLevel</span> </td>
    <td>documented before available, as early as 2002 </td>
  </tr>
  <tr>
    <td><span class="declared function">KfRaiseIrql</span> </td>
    <td>x64 only; <br>
    redefined as inline function to read and write <span class="register">cr8</span>;
    <br>
    supported for x86 as export from HAL version 3.51 and higher </td>
  </tr>
  <tr>
    <td><span class="undocumented function">KiCpuId</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2; <br>
    discontinued in 6.3 </td>
  </tr>
  <tr>
    <td><span class="delayed function">MmAllocatePagesForMdlEx</span> </td>
    <td>undocumented until 2005-2006 </td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentProcessWin32Process</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentProcessWow64Process</span>
    </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentThreadProcess</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentThreadProcessId</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentThreadTeb</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentThreadWin32Thread</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetCurrentThreadWin32ThreadAndEnterCriticalRegion</span>
    </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">PsGetProcessWow64Process</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="minwin function">PsIsSystemProcess</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">PsWrapApcWow64Thread</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="function">RtlCopyMemory</span> </td>
    <td>x64 only; <br>
    redefined by macro using <span class="function">memcpy</span> (x86 also)
    </td>
  </tr>
  <tr>
    <td><span class="declared function">RtlCopyMemoryNonTemporal</span> </td>
    <td>x64 only; <br>
    redefined by macro as <span class="function">RtlCopyMemory</span> (x86 only)
    </td>
  </tr>
  <tr>
    <td><span class="function">RtlLookupFunctionEntry</span> </td>
    <td>x64 only; <br>
    also exported as export from contemporaneous KERNEL32 versions; <br>
    documentation and declaration are in SDK for KERNEL32 </td>
  </tr>
  <tr>
    <td><span class="function">RtlPcToFileHeader</span> </td>
    <td>x64 only; <br>
    x86 also in 10.0 and higher; <br>
    also exported as export from contemporaneous KERNEL32 versions; <br>
    documentation and declaration are in SDK for KERNEL32 </td>
  </tr>
  <tr>
    <td><span class="function">RtlRestoreContext</span> </td>
    <td>x64 only; <br>
    also exported as export from contemporaneous KERNEL32 versions; <br>
    documentation and declaration are in SDK for KERNEL32 </td>
  </tr>
  <tr>
    <td><span class="function">RtlUnwindEx</span> </td>
    <td>x64 only; <br>
    also exported as export from contemporaneous KERNEL32 versions; <br>
    documentation and declaration are in SDK for KERNEL32 </td>
  </tr>
  <tr>
    <td><span class="function">RtlVirtualUnwind</span> </td>
    <td>x64 only; <br>
    also exported as export from contemporaneous KERNEL32 versions; <br>
    documentation and declaration are in SDK for KERNEL32 </td>
  </tr>
  <tr>
    <td><span class="declared function">SeReportSecurityEvent</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">SeSetAuditParameter</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="minwin function">ZwSecureConnectPort</span> </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><span class="declared function">__C_specific_handler</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="undocumented function">__chkstk</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="undocumented function">__misaligned_access</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="undocumented function">_local_unwind</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="undocumented function">_setjmp</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="undocumented function">_setjmpex</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="function">longjmp</span> </td>
    <td>x64 only </td>
  </tr>
  <tr>
    <td><span class="function">memcmp</span> </td>
    <td>x64 only; <br>
    also x86 in 6.2 and higher </td>
  </tr>
</table>
<div class="Footer">
  <p class="Dates">This page was created on 20th April 2009 and was last modified 
  on 17th October 2018. </p>
  <!--webbot bot="Include" U-Include="../../_include/c0918.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2009-2018. Geoff Chappell. All rights reserved. 
<a href="../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="5723" -->
</div>

</body>

</html>
