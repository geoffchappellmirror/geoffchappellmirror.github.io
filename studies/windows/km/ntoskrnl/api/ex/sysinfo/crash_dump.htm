<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SYSTEM_CRASH_DUMP_INFORMATION</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="29544" -->
<h1>SYSTEM_CRASH_DUMP_INFORMATION </h1>
<p>The <span class="struct">SYSTEM_CRASH_DUMP_INFORMATION</span> structure is is 
what a successful call to <span class="function"><a href="query.htm">ZwQuerySystemInformation</a></span> 
or <span class="function">NtQuerySystemInformation</span> produces in its output 
buffer when given the information class <span class="constant">SystemCrashDumpInformation</span> 
(0x20). This information class is valid only in versions 3.50 to 5.0. </p>
<h2>Documentation Status </h2>
<p>The <span class="struct">SYSTEM_CRASH_DUMP_INFORMATION</span> structure is not 
documented. </p>
<p>Its only known disclosure by Microsoft is in type information such as Microsoft 
nowadays includes with public symbol files. For this old structure, however, the 
type information is instead in two statically linked libraries: GDISRVL.LIB from 
the Device Driver Kit (DDK) for Windows NT 3.51 and SHELL32.LIB from the DDK for 
Windows NT 4.0. </p>
<h2>Layout </h2>
<p>The <span class="struct">SYSTEM_CRASH_DUMP_INFORMATION</span> is 4 bytes, originally, 
but is 8 bytes in version 5.0. </p>
<table class="Struct">
  <colgroup>
    <col class="Offset"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset </th>
    <th>Definition </th>
    <th>Versions </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>
    <pre class="source">HANDLE CrashDumpSection;</pre>
    </td>
    <td>3.50 to 5.0 </td>
    <td>last member in 3.50 to 4.0 </td>
  </tr>
  <tr>
    <td>0x04 </td>
    <td>unknown dword </td>
    <td>5.0 only </td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>If the kernel has created a section in anticipation of ever writing a crash dump 
file, then the <span class="member">CrashDumpSection</span> is a new handle to that 
section (with <span class="constant">SECTION_MAP_READ</span> access). Otherwise,
<span class="member">CrashDumpSection</span> is <span class="constant">NULL</span>. 
(Perhaps as a coding error, failure to create a handle, which would be unusual and 
causes the query to fail, induces the kernel to forget that it has created the section.)
</p>
<p>In version 5.0, the kernel must already have a dump control block else the query 
fails (returning <span class="constant">STATUS_NOT_FOUND</span>). The new member 
is then zero. Its purpose is unknown. </p>
<div class="Footer">
  <p class="Dates">This page was created on 3rd
  <a href="../../../../../../../new/19/11.htm">November 2019</a>. </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c19.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2019. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="6722" -->
</div>

</body>

</html>
