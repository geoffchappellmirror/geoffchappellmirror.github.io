<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SYSTEM_PLUGPLAY_BUS_INFORMATION</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="29544" -->
<h1>SYSTEM_PLUGPLAY_BUS_INFORMATION </h1>
<p>The <span class="struct">SYSTEM_PLUGPLAY_BUS_INFORMATION</span> structure may 
be what a successful call to <span class="function"><a href="query.htm">ZwQuerySystemInformation</a></span> 
or <span class="function">NtQuerySystemInformation</span> would produce in its output 
buffer when given the information class <span class="constant">SystemPlugPlayBusInformation</span> 
(0x28) in versions 3.51 and 4.0. Earlier and later versions reject this information 
class as invalid. In all builds yet inspected of these versions, it is instead rejected 
as not implemented. Presumably, it was some sort of placeholder, at best an experiment 
that never got far. Version 5.0 reworked Plug and Play substantially. Version 5.1 
repurposes the information class’s numerical value as <span class="constant">SystemVerifierAddDriverInformation</span> 
and only then to set system information. </p>
<h2>Documentation Status </h2>
<p>The <span class="struct">SYSTEM_PLUGPLAY_BUS_INFORMATION</span> structure is 
not documented. It is known only from type information in early import libraries: 
GDISRVL.LIB from the Device Driver Kit (DDK) for Windows NT 3.51 and SHELL32.LIB 
from the DDK for Windows NT 4.0. </p>
<h2>Layout </h2>
<p>The <span class="struct">SYSTEM_PLUGPLAY_BUS_INFORMATION</span> is 0x40 bytes.
</p>
<table class="Struct">
  <colgroup>
    <col class="Offset"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset </th>
    <th>Definition </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>
    <pre class="source">ULONG BusCount;</pre>
    </td>
  </tr>
  <tr>
    <td>0x04 </td>
    <td>
    <pre class="source">PLUGPLAY_BUS_INSTANCE BusInstance [ANYSIZE_ARRAY];</pre>
    </td>
  </tr>
</table>
<p>The 0x3C-byte <span class="struct">PLUGPLAY_BUS_INSTANCE</span> is also known 
only from this type information and appears to have no other purpose: </p>
<table class="Struct">
  <colgroup>
    <col class="Offset"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset </th>
    <th>Definition </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>
    <pre class="source">PLUGPLAY_BUS_TYPE BusType;</pre>
    </td>
  </tr>
  <tr>
    <td>0x08 </td>
    <td>
    <pre class="source">ULONG BusNumber;</pre>
    </td>
  </tr>
  <tr>
    <td>0x0C </td>
    <td>
    <pre class="source">USHORT BusName [0x18];</pre>
    </td>
  </tr>
</table>
<p>Again for the 8-byte <span class="struct">PLUGPLAY_BUS_TYPE</span>: </p>
<table class="Struct">
  <colgroup>
    <col class="Offset"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset </th>
    <th>Definition </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>
    <pre class="source">PLUGPLAY_BUS_CLASS BusClass;</pre>
    </td>
  </tr>
  <tr>
    <td>0x04 </td>
    <td>
    <pre class="source">union {
    INTERFACE_TYPE SystemBusType;
    PLUGPLAY_VIRTUAL_BUS_TYPE PlugPlayVirtualBusType;
};</pre>
    </td>
  </tr>
</table>
<p>The <span class="enum">PLUGPLAY_BUS_CLASS</span> enumeration selects from the 
union at offset 0x04. It takes values: </p>
<ul>
  <li>0 for <span class="constant">SystemBus</span>; </li>
  <li>1 for <span class="constant">PlugPlayVirtualBus</span>; </li>
  <li>2 for <span class="constant">MaxPlugPlayBusClass</span>. </li>
</ul>
<p>The <span class="enum">PLUGPLAY_VIRTUAL_BUS_TYPE</span> enumeration takes values:
</p>
<ul>
  <li>0 for <span class="constant">Root</span>; </li>
  <li>1 for <span class="constant">MaxPlugPlayVirtualBusType</span>. </li>
</ul>
<div class="Footer">
  <p class="Dates">This page was created on 3rd
  <a href="../../../../../../../new/19/11.htm">November 2019</a>. </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c19.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2019. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="6722" -->
</div>

</body>

</html>
