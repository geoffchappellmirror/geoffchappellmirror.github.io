<!doctype html>
<html lang="en">

<head>
<title>NTMMAPI.H</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="43332" -->
<div class="Main">
  <h1>NTMMAPI.H </h1>
  <p>The public symbol file NTKRPAMP.PDB for the original release of Windows 10 
  tells that the kernel is built with the NTMMAPI.H header at </p>
  <blockquote>
    d:\th.public.fre\internal\sdk\inc
  </blockquote>
  <p>and draws from it the type definitions that are tabulated below. The header 
  NTMMAPI.H is not known in any Device Driver Kit (DDK) or Windows Driver Kit (WDK).
  </p>
  <table class="LineNumbers">
    <colgroup>
      <col class="LineNumber"><col class="Name">
    </colgroup>
    <thead>
      <tr>
        <th>Line Number </th>
        <th>Type </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>305 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntmmapi/section_image_information/index.htm">_SECTION_IMAGE_INFORMATION</a></span>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Though public symbols for the kernel show only one type as defined in NTMMAPI.H, 
  many more show in symbol files for other modules. Among these are user-mode DLLs 
  that are very far removed from system programming, e.g., URLMON.DLL from Internet 
  Explorer. Though the symbol files in question are in effect private symbol files, 
  Microsoft has published them freely in downloadable packages of all the public 
  symbol files for all of Windows, starting with Windows 8. If inclusion of these 
  unusually detailed symbol files in these packages was at first an oversight, it 
  has been left to stand for years, though not for all modules. For instance, it 
  ceased for URLMON.DLL after the 1709 edition of Windows 10. </p>
  <h2>Anti-Trust Settlement Forensics </h2>
  <p>To anyone with a working knowledge of the documented structures and enumerations 
  for user-mode interaction with the kernel, the types defined in this NTMMAPI.H 
  header that Microsoft keeps very much to itself are an obvious treasure trove. 
  This is specially remarkable in the context of Microsoft’s settlement of an anti-trust 
  suit among whose allegations were that Microsoft’s products such as Internet Explorer 
  had access to Microsoft’s operating system, a monopoly product, which Microsoft 
  did not provide to these products’ competitors. For the record, then, here are 
  the very many types that Microsoft’s freely published URLMON.PDB reveals were 
  accessible to the source code for URLMON.DLL from including the unpublished NTMMAPI.H 
  when building for the original release of 32-bit Windows 10: </p>
  <table class="LineNumbers">
    <colgroup>
      <col class="LineNumber"><col class="Name">
    </colgroup>
    <thead>
      <tr>
        <th>Line Number </th>
        <th>Type </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>50 </td>
        <td>struct <span class="struct">_MEMORY_WORKING_SET_BLOCK</span> </td>
      </tr>
      <tr>
        <td>67 </td>
        <td>enum <span class="enum">_MEMORY_WORKING_SET_EX_LOCATION</span> </td>
      </tr>
      <tr>
        <td>74 </td>
        <td>struct <span class="struct">_MEMORY_WORKING_SET_EX_BLOCK</span> </td>
      </tr>
      <tr>
        <td>93 </td>
        <td>unnamed struct <span class="member">Invalid</span> in <br>
        anonymous union in <br>
        struct <span class="struct">_MEMORY_WORKING_SET_EX_BLOCK</span> </td>
      </tr>
      <tr>
        <td>119 </td>
        <td>struct <span class="struct">_MEMORY_WORKING_SET_EX_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>121 </td>
        <td>unnamed union <span class="member">u1</span> in <br>
        struct <span class="struct">_MEMORY_WORKING_SET_EX_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>127 </td>
        <td>struct <span class="struct">_MEMORY_WORKING_SET_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>132 </td>
        <td>struct <span class="struct">_MEMORY_SHARED_COMMIT_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>138 </td>
        <td>struct <span class="struct">_MEMORY_REGION_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>146 </td>
        <td>struct <span class="struct">_MEMORY_RANGE_ENTRY</span> </td>
      </tr>
      <tr>
        <td>151 </td>
        <td>enum <span class="enum">_VIRTUAL_MEMORY_INFORMATION_CLASS</span>
        </td>
      </tr>
      <tr>
        <td>158 </td>
        <td>struct <span class="struct">_MEMORY_IMAGE_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>201 </td>
        <td>struct <span class="struct">_MEMORY_FRAME_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>211 </td>
        <td>struct <span class="struct">_FILEOFFSET_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>217 </td>
        <td>struct <span class="struct">_PAGEDIR_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>223 </td>
        <td>struct <span class="struct">_UNIQUE_PROCESS_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>229 </td>
        <td>struct <span class="struct">_MMPFN_IDENTITY</span> </td>
      </tr>
      <tr>
        <td>230 </td>
        <td>unnamed union <span class="member">u1</span> in <br>
        struct <span class="struct">_MMPFN_IDENTITY</span> </td>
      </tr>
      <tr>
        <td>237 </td>
        <td>unnamed union <span class="member">u2</span> in <br>
        struct <span class="struct">_MMPFN_IDENTITY</span> </td>
      </tr>
      <tr>
        <td>238 </td>
        <td>unnamed struct <span class="member">e1</span> in <br>
        unnamed union <span class="member">u2</span> in <br>
        struct <span class="struct">_MMPFN_IDENTITY</span> </td>
      </tr>
      <tr>
        <td>242 </td>
        <td>unnamed struct <span class="member">e2</span> in <br>
        unnamed union <span class="member">u2</span> in <br>
        struct <span class="struct">_MMPFN_IDENTITY</span> </td>
      </tr>
      <tr>
        <td>252 </td>
        <td>enum <span class="enum">_MM_ETW_WORKING_SET_TYPE</span> </td>
      </tr>
      <tr>
        <td>259 </td>
        <td>union <span class="union">_MM_ETW_PAGE_EXTRA_INFO</span> </td>
      </tr>
      <tr>
        <td>260 </td>
        <td>unnamed struct <span class="member">e1</span> in <br>
        union <span class="union">_MM_ETW_PAGE_EXTRA_INFO</span> </td>
      </tr>
      <tr>
        <td>263 </td>
        <td>unnamed struct <span class="member">e2</span> in <br>
        union <span class="union">_MM_ETW_PAGE_EXTRA_INFO</span> </td>
      </tr>
      <tr>
        <td>272 </td>
        <td>struct <span class="struct">_MM_ETW_PAGE_INFO</span> </td>
      </tr>
      <tr>
        <td>276 </td>
        <td>struct <span class="struct">_MM_ETW_PAGE_INFO_EX</span> </td>
      </tr>
      <tr>
        <td>281 </td>
        <td>struct <span class="struct">_MM_ETW_WORKING_SET_PFN_RUNDOWN</span>
        </td>
      </tr>
      <tr>
        <td>287 </td>
        <td>enum <span class="enum">_SECTION_INFORMATION_CLASS</span> </td>
      </tr>
      <tr>
        <td>294 </td>
        <td>struct <span class="struct">_SECTIONBASICINFO</span> </td>
      </tr>
      <tr>
        <td>305 </td>
        <td>struct <span class="struct">_SECTION_IMAGE_INFORMATION</span> </td>
      </tr>
      <tr>
        <td>347 </td>
        <td>struct <span class="struct">_SECTION_IMAGE_INFORMATION32</span> </td>
      </tr>
      <tr>
        <td>388 </td>
        <td>struct <span class="struct">_SECTION_IMAGE_INFORMATION64</span> </td>
      </tr>
      <tr>
        <td>437 </td>
        <td>struct <span class="struct">_PHYSICAL_CHANNEL_RUN</span> </td>
      </tr>
      <tr>
        <td>445 </td>
        <td>struct <span class="struct">_SYSTEM_MEMORY_TOPOLOGY_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>461 </td>
        <td>struct <span class="struct">_SYSTEM_MEMORY_CHANNEL_INFORMATION</span>
        </td>
      </tr>
      <tr>
        <td>488 </td>
        <td>enum <span class="enum">_PROCESS_WORKING_SET_OPERATION</span> </td>
      </tr>
      <tr>
        <td>504 </td>
        <td>struct <span class="struct">_PROCESS_WORKING_SET_CONTROL</span> </td>
      </tr>
      <tr>
        <td>526 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntmmapi/memory_partition_transfer_information.htm">
        _MEMORY_PARTITION_TRANSFER_INFORMATION</a></span> </td>
      </tr>
      <tr>
        <td>532 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntmmapi/memory_partition_initial_add_information.htm">
        _MEMORY_PARTITION_INITIAL_ADD_INFORMATION</a></span> </td>
      </tr>
      <tr>
        <td>538 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntmmapi/memory_partition_pagefile_information.htm">
        _MEMORY_PARTITION_PAGEFILE_INFORMATION</a></span> </td>
      </tr>
      <tr>
        <td>545 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntmmapi/memory_partition_configuration_information.htm">
        _MEMORY_PARTITION_CONFIGURATION_INFORMATION</a></span> </td>
      </tr>
      <tr>
        <td>557 </td>
        <td>struct <span class="struct">
        <a href="../../inc/api/ntmmapi/memory_partition_page_combine_information.htm">
        _MEMORY_PARTITION_PAGE_COMBINE_INFORMATION</a></span> </td>
      </tr>
      <tr>
        <td>563 </td>
        <td>enum <span class="enum">
        <a href="../../inc/api/ntmmapi/memory_partition_information_class.htm">_MEMORY_PARTITION_INFORMATION_CLASS</a></span>
        </td>
      </tr>
    </tbody>
  </table>
  <p>This looks to be a complete reckoning of named classes, enumerations, structures 
  and unions that are defined in the unseen NTMMAPI.H. A contemporaneous statically 
  linked library named CLFSMGMT.LIB has its type information from creating a pre-compiled 
  header, such that it almost certainly is complete for its inclusions from NTMMAPI.H, 
  and yet it adds only anonymous structures and unions that are nested within the 
  types listed above. </p>
  <div class="Footer">
    <p class="Dates">This page was created on 26th
    <a href="../../../../../../new/20/10.htm">October 2020</a> and was last modified 
    on 23rd <a href="../../../../../../new/22/12.htm">January 2023</a>. </p>
    <!--webbot bot="Include" U-Include="../../../_include/c2023.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020-2023. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="54423" -->
  </div>
</div>

</body>

</html>
