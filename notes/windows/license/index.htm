<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Licensing Windows Vista</title>
<link rel="stylesheet" type="text/css" href="../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/notes.css">
<script type="text/javascript" src="../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/notes.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript Header" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="55207" -->
<div class="Main">
  <!--webbot bot="Include" U-Include="../../_include/intro.htm" TAG="BODY" startspan -->

<div class="Header">
  <p class="alert">INTRODUCTION IN OCCASIONAL PROGRESS: There always seem to be 
  more interesting things to do than write introductions. </p>
</div>

<!--webbot bot="Include" endspan i-checksum="1884" -->
  <h1>Licensing Windows Vista </h1>
  <p>Microsoft’s terms for licensing Windows have for many years, if not always, 
  restricted the use that Windows will make of a computer’s resources. This hasn’t 
  gone completely unnoticed, but neither has it been much concern. The limits on 
  such things as the number of simultaneous network connections are high enough 
  not to matter much in practice for computers used at home or even in small businesses. 
  However, in these days when even home users are encouraged to regard 1GB of RAM 
  as minimal and might easily think to spend on several gigabytes, how well are 
  they warned that 32-bit editions of Windows Vista are licensed only for 4GB?
  </p>
  <p>On that particular point, though Microsoft does document the 4GB limit, there 
  seems to be no clear statement that this is a license restriction, as opposed 
  to being a technical constraint that is impossible to surmount or at least too 
  difficult for the price. The license terms, presented as an agreement, do not 
  trouble even to mention the word memory. Conversely, Microsoft’s page about
  <a target="_top" href="http://msdn.microsoft.com/library/aa366778.aspx">Memory 
  Limits for Windows Releases</a> doesn’t mention licensing. </p>
  <p>The fun and games aren’t just with omissions, either. The License Agreement 
  for the Home editions of Windows Vista states plainly that the software may be 
  used “on up to two processors on” the licensed “device at one time”, yet the software 
  itself is configured to regard a second physical processor as unlicensed. </p>
  <p>Perhaps we should all just count ourselves fortunate to have this problem of 
  luxury. Even a decade ago, multiple processors with 4GB of RAM would have seemed 
  outrageous as a machine to park on a home desktop for playing games. Indeed, it 
  would have been extravagant even for many serious purposes of accounting, mathematics 
  or engineering. If Microsoft takes its time to get round to updating some limits 
  that were set long ago, who’s to grumble? </p>
  <h2>License Values </h2>
  <p>One thing that Microsoft doesn’t seem to have trouble finding time for is writing 
  new code to support its notions of software licensing. For Windows Vista, Microsoft 
  has introduced a formal scheme of named license values through which Microsoft 
  specifies how much Windows will do for the licensee. Where earlier versions of 
  Windows might decide a behaviour by choosing from hard-coded parameters for the 
  different product suites, Windows Vista reads the license value for that specific 
  behaviour. For example: </p>
  <ul>
    <li>the number of licensed (physical) processors is represented by the license 
    value <span class="licvalue">Kernel-RegisteredProcessors</span>; </li>
    <li>RAM in excess of the total given in MB by the value of
    <span class="licvalue">Kernel-WindowsMaxMemAllowedx86</span> is ignored;
    </li>
    <li>and the chess game won’t let you play unless <span class="licvalue">Shell-PremiumInBoxGames-Chess-EnableGame</span> 
    evaluates as 1. </li>
  </ul>
  <p>Like most configuration data, the license values are stored in the registry. 
  The whole set of them is stored as the binary data for one registry value. Individually, 
  the license values are read through the API functions <span class="function">NtQueryLicenseValue</span> 
  (user-mode) and <span class="function">
  <a href="../../../studies/windows/km/ntoskrnl/api/ex/slmem/queryvalue.htm">ZwQueryLicenseValue</a></span> 
  (kernel-mode). Several more functions are exported in kernel mode both to fetch 
  or update the whole set and to manage a tamper state. Unlike most configuration 
  data, the license values are protected from being tampered with. </p>
  <div class="Footer">
    <!--webbot bot="Include" U-Include="../../_include/c0809.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2008-2009. Geoff Chappell. All rights reserved. 
<a href="../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="51789" -->
  </div>
</div>

</body>

</html>
