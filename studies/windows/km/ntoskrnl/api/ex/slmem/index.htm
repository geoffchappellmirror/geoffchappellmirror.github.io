<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 12.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Software Licensing</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" i-checksum="29544" endspan -->
<h1>Software Licensing </h1>
<p>Windows Vista introduces a formal scheme of named license values, with API functions 
to manage them. The license values are stored together as binary data for a single 
registry value. The <a href="productpolicy.htm">data format</a> is presented separately. 
Like registry values, each license value has its own data. </p>
<p>The kernel exports two functions <span class="function">
<a href="fetchdata.htm">ExFetchLicenseData</a></span> and <span class="function">
<a href="updatedata.htm">ExUpdateLicenseData</a></span> that work with the whole 
of the binary data. Another, <span class="function"><a href="queryvalue.htm">ZwQueryLicenseValue</a></span>, 
obtains the data for any one license value. This function is also accessible from 
user mode, as the NTDLL functions <span class="function">NtQueryLicenseValue</span> 
and <span class="function">ZwQueryLicenseValue</span>. </p>
<p>Of course, license data stored in the registry even in an undocumented format 
might easily be changed by users, which they would have some incentive to try since 
Microsoft charges significantly different prices for different licenses. Microsoft 
therefore has an elaborate scheme for checking that the license data remains as 
Microsoft wants it. The kernel is the repository for whether the licensing data 
has been tampered with, and to this end exports two more functions,
<span class="function"><a href="gettamperstate.htm">ExGetLicenseTamperState</a></span> 
and <span class="function"><a href="settamperstate.htm">ExSetLicenseTamperState</a></span>.
</p>
<p>It should not surprise that no function mentioned on this page is documented.
</p>
<div class="Footer">
  <p class="Dates">This page was created on 10th March 2009. </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c09.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2009. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" i-checksum="6658" endspan -->
</div>

</body>

</html>
