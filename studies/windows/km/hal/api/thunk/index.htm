<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>HAL Thunks</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="43332" -->
<h1>HAL Thunk Functions </h1>
<p>The HAL exports a handful of functions that were superseded as early as Windows 
NT 3.50 but indirectly. The new function for each retained the old implementation 
with only very slight formal differences, mostly from changing to the
<span class="keyword">__fastcall</span> convention for passing arguments. But the 
old were not documented as obsolete and the new were not documented at all. Programmers 
were to continue writing as if the old functions continue to exist, and with unchanged 
documentation, but macros redefined the old in terms of the new. Programmers could 
be none the wiser unless they bothered to look into the headers for the new functions’ 
declarations. Meanwhile, to support old code that was built to import the old functions, 
the new HAL continued to export the old functions as stubs that simply reinterpret 
the old by calling the new. All the old functions continue to be exported by name 
from x86 builds of the HAL, though some are nowadays exported merely as forwards 
to the kernel. </p>
<table class="Functions">
  <tr>
    <th>Function </th>
    <th>Versions </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td><span class="function"><a href="acquire.htm">KeAcquireSpinLock</a></span>
    </td>
    <td>all (x86 only) </td>
    <td>export in 3.50 to 6.1 is stub that calls <span class="function">KfAcquireSpinLock</span>;
    <br>
    export in 6.2 and higher is forward to <span class="function">KeAcquireSpinLock</span> 
    in kernel </td>
  </tr>
  <tr>
    <td><span class="function">KeLowerIrql</span> </td>
    <td>all (x86 only) </td>
    <td>export in 3.50 and higher is stub that calls <span class="function">KfLowerIrql</span>
    </td>
  </tr>
  <tr>
    <td><span class="function">KeRaiseIrql</span> </td>
    <td>all (x86 only) </td>
    <td>export in 3.50 and higher is stub that calls <span class="function">KfRaiseIrql</span>
    </td>
  </tr>
  <tr>
    <td><span class="function"><a href="release.htm">KeReleaseSpinLock</a></span>
    </td>
    <td>all (x86 only) </td>
    <td>export in 3.50 to 6.1 is stub that calls <span class="function">KfReleaseSpinLock</span>;
    <br>
    export in 6.2 and higher is forward to <span class="function">KeReleaseSpinLock</span> 
    in kernel </td>
  </tr>
</table>
<div class="Footer">
  <p class="Dates">This page was created on 5th
  <a href="../../../../../../new/19/12.htm">December 2019</a> and was last modified 
  on 6th December 2019. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c19.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2019. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="62933" -->
</div>

</body>

</html>
