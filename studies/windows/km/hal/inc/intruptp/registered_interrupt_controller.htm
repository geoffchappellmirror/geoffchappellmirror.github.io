<!doctype html>
<html lang="en">

<head>
<title>REGISTERED_INTERRUPT_CONTROLLER</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="43332" -->
<div class="Main">
  <h1>REGISTERED_INTERRUPT_CONTROLLER </h1>
  <p>The <span class="struct">REGISTERED_INTERRUPT_CONTROLLER</span> (formally
  <span class="struct">_REGISTERED_INTERRUPT_CONTROLLER</span>) is the HAL’s abstraction 
  of an interrupt controller. </p>
  <h2>Documentation Status </h2>
  <p>The <span class="struct">REGISTERED_INTERRUPT_CONTROLLER</span> is not documented. 
  Neither is Microsoft known to have ever published a C-language definition in any 
  Windows Driver Kit (WDK). </p>
  <p>The practical equivalent of a C-language definition is available as type information 
  in public symbol files for the HAL, starting with Windows 8. The merging of the 
  HAL into the kernel for the 2004 release of 64-bit Windows moves this type information 
  into the public symbols for the kernel. </p>
  <p>Exactly why the public symbols have type information for the
  <span class="struct">REGISTERED_INTERRUPT_CONTROLLER</span> is unclear. That it’s 
  unintended is not impossible. When compiling the separate source file, HALSYM.C, 
  to merge type information into the public symbols for the already built HAL, what 
  the compiler counted as this structure’s use is a reference by pointer—but this 
  pointer type is itself unreferenced. This situation can have been produced by 
  as little as the pointer type’s use in an inline routine or just its appearance 
  in the declaration of an internal routine that is in turn called from an inline 
  routine. On the other hand, HALSYM.C can have used the pointer type explicitly, 
  e.g., by defining a variable of this type. A reason to do this would be that the 
  KDEXTS debugger extension’s <span class="command">!gicr_findapending</span> and
  <span class="command">!ioapic</span> commands depend on having type information 
  for the <span class="struct">REGISTERED_INTERRUPT_CONTROLLER</span>. Intention 
  is hard to gauge. It’s not as if either command is documented—at all, let alone 
  as intended to work for those outside Microsoft who are not blessed with access 
  to private symbols. </p>
  <h2>Variability </h2>
  <p>For a structure that looks to be used only within the HAL (not that any effort 
  has yet been put into the looking), the <span class="struct">REGISTERED_INTERRUPT_CONTROLLER</span> 
  is remarkably stable. The structure has grown, but only because one sub-structure 
  pushes subsequent members ever further along: </p>
  <table class="Sizes">
    <colgroup>
      <col class="Version"><col class="Size" span="2">
    </colgroup>
    <thead>
      <tr>
        <th>Version </th>
        <th>Size (x86) </th>
        <th>Size (x64) </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>6.2 to 1607 </td>
        <td>0xBC </td>
        <td>0x0148 </td>
      </tr>
      <tr>
        <td>1703 to 1809 </td>
        <td>0xC0 </td>
        <td>0x0150 </td>
      </tr>
      <tr>
        <td>1903 </td>
        <td>0xC4 </td>
        <td>0x0158 </td>
      </tr>
      <tr>
        <td>2004 </td>
        <td>0xC8 </td>
        <td>0x0160 </td>
      </tr>
    </tbody>
  </table>
  <h2>Layout </h2>
  <p>The sizes in the preceding table and the offsets and definitions in the next 
  are from type information in public symbols as noted above for Windows 8 and higher. 
  Whether the structure even exists in earlier versions is left for another time.
  </p>
  <table class="Struct">
    <colgroup>
      <col class="Offset" span="2"><col class="Definition">
      <col class="Versions">
    </colgroup>
    <thead>
      <tr>
        <th>Offset (x86) </th>
        <th>Offset (x64) </th>
        <th>Definition </th>
        <th>Versions </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0x00 </td>
        <td>0x00 </td>
        <td>
        <pre class="source">LIST_ENTRY ListEntry;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x08 </td>
        <td>0x10 </td>
        <td>
        <pre class="source">PVOID InternalData;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x0C </td>
        <td>0x18 </td>
        <td>
        <pre class="source">ULONG InternalDataSize;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x10 </td>
        <td>0x20 </td>
        <td>
        <pre class="source"><a href="../ntsoc/interrupt_function_table.htm">INTERRUPT_FUNCTION_TABLE</a> FunctionTable;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x60 (6.2 to 1607); <br>
        0x64 (1703 to 1809); <br>
        0x68 (1903); <br>
        0x6C </td>
        <td>0xC0 (6.2 to 1607); <br>
        0xC8 (1703 to 1809); <br>
        0xD0 (1903); <br>
        0xD8 </td>
        <td>
        <pre class="source">KNOWN_CONTROLLER_TYPE KnownType;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x64 (6.2 to 1607); <br>
        0x68 (1703 to 1809); <br>
        0x6C (1903); <br>
        0x70 </td>
        <td>0xC4 (6.2 to 1607); <br>
        0xCC (1703 to 1809); <br>
        0xD4 (1903); <br>
        0xDC </td>
        <td>
        <pre class="source">ULONG Capabilities;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x68 (6.2 to 1607); <br>
        0x6C (1703 to 1809); <br>
        0x70 (1903); <br>
        0x74 </td>
        <td>0xC8 (6.2 to 1607); <br>
        0xD0 (1703 to 1809); <br>
        0xD8 (1903); <br>
        0xE0 </td>
        <td>
        <pre class="source">ULONG Flags;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x6C (6.2 to 1607); <br>
        0x70 (1703 to 1809); <br>
        0x74 (1903); <br>
        0x78 </td>
        <td>0xCC (6.2 to 1607); <br>
        0xD4 (1703 to 1809); <br>
        0xDC (1903); <br>
        0xE4 </td>
        <td>
        <pre class="source">ULONG MaxPriority;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x70 (6.2 to 1607); <br>
        0x74 (1703 to 1809); <br>
        0x78 (1903); <br>
        0x7C </td>
        <td>0xD0 (6.2 to 1607); <br>
        0xD8 (1703 to 1809); <br>
        0xE0 (1903); <br>
        0xE8 </td>
        <td>
        <pre class="source">ULONG UnitId;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x74 (6.2 to 1607); <br>
        0x78 (1703 to 1809); <br>
        0x7C (1903); <br>
        0x80 </td>
        <td>0xD8 (6.2 to 1607); <br>
        0xE0 (1703 to 1809); <br>
        0xE8 (1903); <br>
        0xF0 </td>
        <td>
        <pre class="source">LIST_ENTRY LinesHead;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x7C (6.2 to 1607); <br>
        0x80 (1703 to 1809); <br>
        0x84 (1903); <br>
        0x88 </td>
        <td>0xE8 (6.2 to 1607); <br>
        0xF0 (1703 to 1809); <br>
        0xF8 (1903); <br>
        0x0100 </td>
        <td>
        <pre class="source">LIST_ENTRY OutputLinesHead;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x84 (6.2 to 1607); <br>
        0x88 (1703 to 1809); <br>
        0x8C (1903); <br>
        0x90 </td>
        <td>0xF8 (6.2 to 1607); <br>
        0x0100 (1703 to 1809); <br>
        0x0108 (1903); <br>
        0x0110 </td>
        <td>
        <pre class="source">LONG MinLine;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x88 (6.2 to 1607); <br>
        0x8C (1703 to 1809); <br>
        0x90 (1903); <br>
        0x94 </td>
        <td>0xFC (6.2 to 1607); <br>
        0x0104 (1703 to 1809); <br>
        0x010C (1903); <br>
        0x0114 </td>
        <td>
        <pre class="source">LONG MaxLine;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x8C (6.2 to 1607); <br>
        0x90 (1703 to 1809); <br>
        0x94 (1903); <br>
        0x98 </td>
        <td>0x0100 (6.2 to 1607); <br>
        0x0108 (1703 to 1809); <br>
        0x0110 (1903); <br>
        0x0118 </td>
        <td>
        <pre class="source">ULONG MaxClusterSize;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x90 (6.2 to 1607); <br>
        0x94 (1703 to 1809); <br>
        0x98 (1903); <br>
        0x9C </td>
        <td>0x0104 (6.2 to 1607); <br>
        0x010C (1703 to 1809); <br>
        0x0114 (1903); <br>
        0x011C </td>
        <td>
        <pre class="source">ULONG MaxClusters;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x94 (6.2 to 1607); <br>
        0x98 (1703 to 1809); <br>
        0x9C (1903); <br>
        0xA0 </td>
        <td>0x0108 (6.2 to 1607); <br>
        0x0110 (1703 to 1809); <br>
        0x0118 (1903); <br>
        0x0120 </td>
        <td>
        <pre class="source">ULONG InterruptReplayDataSize;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x98 (6.2 to 1607); <br>
        0x9C (1703 to 1809); <br>
        0xA0 (1903); <br>
        0xA4 </td>
        <td>0x010C (6.2 to 1607); <br>
        0x0114 (1703 to 1809); <br>
        0x011C (1903); <br>
        0x0124 </td>
        <td>
        <pre class="source">INTERRUPT_PROBLEM Problem;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0x9C (6.2 to 1607); <br>
        0xA0 (1703 to 1809); <br>
        0xA4 (1903); <br>
        0xA8 </td>
        <td>0x0110 (6.2 to 1607); <br>
        0x0118 (1703 to 1809); <br>
        0x0120 (1903); <br>
        0x0128 </td>
        <td>
        <pre class="source">NTSTATUS ProblemStatus;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0xA0 (6.2 to 1607); <br>
        0xA4 (1703 to 1809); <br>
        0xA8 (1903); <br>
        0xAC </td>
        <td>0x0118 (6.2 to 1607); <br>
        0x0120 (1703 to 1809); <br>
        0x0128 (1903); <br>
        0x0130 </td>
        <td>
        <pre class="source">PCSTR ProblemSourceFile;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0xA4 (6.2 to 1607); <br>
        0xA8 (1703 to 1809); <br>
        0xAC (1903); <br>
        0xB0 </td>
        <td>0x0120 (6.2 to 1607); <br>
        0x0128 (1703 to 1809); <br>
        0x0130 (1903); <br>
        0x0138 </td>
        <td>
        <pre class="source">ULONG ProblemSourceLine;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0xA8 (6.2 to 1607); <br>
        0xAC (1703 to 1809); <br>
        0xB0 (1903); <br>
        0xB4 </td>
        <td>0x0124 (6.2 to 1607); <br>
        0x012C (1703 to 1809); <br>
        0x0134 (1903); <br>
        0x013C </td>
        <td>
        <pre class="source">ULONG CustomProblem;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0xAC (6.2 to 1607); <br>
        0xB0 (1703 to 1809); <br>
        0xB4 (1903); <br>
        0xB8 </td>
        <td>0x0128 (6.2 to 1607); <br>
        0x0130 (1703 to 1809); <br>
        0x0138 (1903); <br>
        0x0140 </td>
        <td>
        <pre class="source">NTSTATUS CustomProblemStatus;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0xB0 (6.2 to 1607); <br>
        0xB4 (1703 to 1809); <br>
        0xB8 (1903); <br>
        0xBC </td>
        <td>0x0130 (6.2 to 1607); <br>
        0x0138 (1703 to 1809); <br>
        0x0140 (1903); <br>
        0x0148 </td>
        <td>
        <pre class="source">UNICODE_STRING ResourceId;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
      <tr>
        <td>0xB8 (6.2 to 1607); <br>
        0xBC (1703 to 1809); <br>
        0xC0 (1903); <br>
        0xC4 </td>
        <td>0x0140 (6.2 to 1607); <br>
        0x0148 (1703 to 1809); <br>
        0x0150 (1903); <br>
        0x0158 </td>
        <td>
        <pre class="source">POHANDLE PowerHandle;</pre>
        </td>
        <td>6.2 and higher </td>
      </tr>
    </tbody>
  </table>
  <div class="Footer">
    <p class="Dates">This page was created on 18th
    <a href="../../../../../../new/23/02.htm">February 2023</a> and was last modified 
    on 22nd February 2023. </p>
    <!--webbot bot="Include" U-Include="../../../_include/c23.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2023. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="62229" -->
  </div>
</div>

</body>

</html>
