<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Kernel Exports Added for Windows XP SP3</title>
<link rel="stylesheet" type="text/css" href="../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/km.css">
<script type="text/javascript" src="../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="21016" -->
<h1>Kernel Exports Added for Windows XP SP3 </h1>
<p>The table below lists the four functions that are first exported by the Windows 
kernel in the version 5.1 from Windows XP SP3. For the two of these functions that 
are yet documented, their listing here is an artefact of ordering by version numbers: 
they first appear chronologically as exports from Windows Server 2003 SP1. One other 
function is not exported by any known build of version 5.2, but is taken up in version 
6.0 and higher. It used to be <span class="undocumented">highlighted yellow</span> 
as this site’s usual indication of undocumented status, but a C-language declaration 
has since been published by Microsoft, though only in one edition of the Enterprise 
WDK for Windows 10. The remaining function is not exported by any other known build 
of any version. </p>
<table class="Functions">
  <colgroup>
    <col class="Name"><col class="Remarks">
  </colgroup>
  <tr>
    <th>Function </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td><span class="function">FsRtlCreateSectionForDataScan</span> </td>
    <td>not in 5.2 before Windows Server 2003 SP1; <br>
    documentation until 2007 requires Windows Server 2003 SP1, and higher; <br>
    declaration requires Windows 2000 and higher, with additional constraints as 
    comment (see below) </td>
  </tr>
  <tr>
    <td><span class="function">IoEnumerateRegisteredFiltersList</span> </td>
    <td>not in 5.2 before Windows Server 2003 SP1; <br>
    documentation requires Update Rollup for Windows 2000 SP4, else Windows Server 
    2003 SP1, and higher; <br>
    declaration requires Windows Server 2003 SP1, and higher </td>
  </tr>
  <tr>
    <td><span class="undocumented function">IoInitializeCrashDump</span> </td>
    <td>discontinued in 5.2 </td>
  </tr>
  <tr>
    <td><span class="minwin function">ObIsDosDeviceLocallyMapped</span> </td>
    <td>not in 5.2 </td>
  </tr>
</table>
<p>The NTIFS.H declaration of <span class="function">FsRtlCreateSectionForDataScan</span> 
has a comment on the function’s availability: </p>
<pre class="source">//  * Windows 2000 SP4 plus URP
//  * Windows XP SP2 plus QFE ?
//  * Windows Server 2003 SP1</pre>
<p>A Knowledge Base article
<a target="_top" href="http://support.microsoft.com/kb/914882">The filter manager 
rollup package for Windows XP SP2</a> suggests the function is back-fitted into 
the later builds of earlier Windows versions to assist anti-virus vendors, who might 
otherwise use the undocumented <span class="function">MmCreateSection</span> function. 
Rather than touch on how Microsoft had left programmers to resort to depending on 
a function that had by then been undocumented for roughly a decade, the Knowledge 
Base article contents itself with the humour of a tautology: “Microsoft does not 
support this API because it is undocumented and unsupported”. </p>
<p>Note anyway that Microsoft took its time to get the new function’s availability 
in Windows 2000 and Windows XP adopted into the formal documentation. It got missed 
for the WDK version 6000 in time for Windows Vista, which does otherwise know of 
the Update Rollup. It instead had to wait until some time during 2007. Perhaps Microsoft 
was still gathering the detail: “Microsoft Windows Server 2003 SP1 and later, the 
Update Rollup for Windows 2000 Service Pack 4 (SP4), and the Filter Manager Rollup 
for Windows XP Service Pack 2 (SP2).” </p>
<p>Neither the Update Rollup for Windows 2000 SP4 nor the Filter Manager Rollup 
for Windows XP SP2 has been found for this study. </p>
<div class="Footer">
  <p class="Dates">This page was created on 30th November 2009 and was last modified 
  on 17th October 2018. </p>
  <!--webbot bot="Include" U-Include="../../_include/c0918.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2009-2018. Geoff Chappell. All rights reserved. 
<a href="../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="5723" -->
</div>

</body>

</html>
