<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ETWP_NOTIFICATION_HEADER</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="48540" -->
<h1>ETWP_NOTIFICATION_HEADER </h1>
<p>The <span class="struct">ETWP_NOTIFICATION_HEADER</span> structure appears to 
be the kernel’s private variant of the <span class="struct">
<a href="../../../inc/api/ntetw/etw_notification_header.htm">ETW_NOTIFICATION_HEADER</a></span>. 
The latter is shared with callers of the <span class="function">
<a href="../traceapi/control/index.htm">NtTraceControl</a></span> function. They 
send and receive more or less arbitrary data in packets that begin with the notification 
header. While the kernel holds a packet in an <span class="struct">
<a href="../../../inc/ntos/etwp/etw_queue_entry.htm">ETW_QUEUE_ENTRY</a></span>, it uses some members of the 
notification header differently—enough differently, it seems, to have prompted a 
slight renaming. Some of these differences are also known to NTDLL but 
apparently no higher. </p>
<h2>Documentation Status </h2>
<p>The <span class="struct">ETWP_NOTIFICATION_HEADER</span> structure is not documented.
</p>
<h2>Layout </h2>
<p>The <span class="struct">ETWP_NOTIFICATION_HEADER</span> is 0x48 bytes in both 
32-bit and 64-bit Windows in versions 6.0 and higher. Whether it or something enough 
like it exists in versions before 6.0, i.e., before <span class="function">NtTraceControl</span>, 
is left for another time. Offsets, types and names in the table below are from Microsoft’s 
symbol files for the kernel starting with Windows 8. No difference is yet known 
for earlier versions. </p>
<table class="Struct">
  <colgroup>
    <col class="Offset"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset </th>
    <th>Definition </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>
    <pre class="source"><a href="../../../inc/api/ntetw/etw_notification_type.htm">ETW_NOTIFICATION_TYPE</a> NotificationType;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x04 </td>
    <td>
    <pre class="source">ULONG NotificationSize;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x08 </td>
    <td>
    <pre class="source">LONG RefCount;</pre>
    </td>
    <td>
    <span class="member">Offset</span> in <span class="struct">
    ETW_NOTIFICATION_HEADER</span>
    </td>
  </tr>
  <tr>
    <td>0x0C </td>
    <td>
    <pre class="source">BOOLEAN ReplyRequested;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x10 </td>
    <td>
    <pre class="source">union {
    ULONG ReplyIndex;
    ULONG Timeout;
};</pre>
    </td>
    <td>
    only <span class="member">Timeout</span> in <span class="struct">
    ETW_NOTIFICATION_HEADER</span>
    </td>
  </tr>
  <tr>
    <td>0x14 </td>
    <td>
    <pre class="source">union {
    ULONG ReplyCount;
    ULONG NotifyeeCount;
};</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x18 </td>
    <td>
    <pre class="source">union {
    ULONGLONG ReplyHandle;
    PVOID ReplyObject;
    ULONG RegIndex;
};</pre>
    </td>
    <td>
    <span class="member">Reserved2</span> in <span class="struct">
    ETW_NOTIFICATION_HEADER</span>
    </td>
  </tr>
  <tr>
    <td>0x20 </td>
    <td>
    <pre class="source">ULONG TargetPID;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x24 </td>
    <td>
    <pre class="source">ULONG SourcePID;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x28 </td>
    <td>
    <pre class="source">GUID DestinationGuid;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x38 </td>
    <td>
    <pre class="source">GUID SourceGuid;</pre>
    </td>
    <td>
    &nbsp;</td>
  </tr>
</table>
<div class="Footer">
  <p class="Dates">This page was created on 27th November 2016 but was not published 
  until 31st <a href="../../../../../../../new/18/12.htm">December 2018</a>. It 
  was last modified on 28th <a href="../../../../../../../new/20/05.htm">May 2020</a>.
  </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c1820.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2018-2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="5149" -->
</div>

</body>

</html>
