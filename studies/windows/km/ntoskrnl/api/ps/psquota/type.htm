<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>PS_QUOTA_TYPE</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="29544" -->
<h1>PS_QUOTA_TYPE </h1>
<p>The <span class="enum">PS_QUOTA_TYPE</span> enumeration selects from the various 
types of resource that are subject to quotas. </p>
<p>The <span class="enum">PS_QUOTA_TYPE</span> is here thought to have been introduced 
with a reorganisation of the <span class="struct"><a href="block.htm">EPROCESS_QUOTA_BLOCK</a></span> 
for Windows XP. This structure had treated quota properties such as current usage, 
peak usage and limit as separate members for the two pool types and the page file. 
For the two pool types, each member was already an array: <span class="member">
QuotaPoolUsage</span>, <span class="member">QuotaPeakPoolUsage</span> and
<span class="member">QuotaPoolLimit</span>. Each was indexed by the
<span class="constant">NonPagedPool</span> (0) and <span class="constant">PagedPool</span> 
(1) values from the <span class="enum">POOL_TYPE</span> enumeration. The reorganisation 
gathered the properties for each quota type into an <span class="struct">
<a href="entry.htm">EPROCESS_QUOTA_ENTRY</a></span>, each with its own
<span class="member">Usage</span>, <span class="member">Peak</span> and
<span class="member">Limit</span>. The quota block then has an array of these 
entries as is <span class="member">QuotaEntry</span> member. The <span class="enum">PS_QUOTA_TYPE</span> indexes this array. </p>
<h2>Documentation Status </h2>
<p>Though the <span class="enum">PS_QUOTA_TYPE</span> itself is not documented, 
its existence is hinted at in Microsoft’s documentation of the
<span class="constant">QUOTA_UNDERFLOW</span> (0x21) bug check, whose second argument 
is described as “The quota type.” The documentation 
advises </p>
<blockquote>
  For the list of all possible quota type values, see the header file <i>Ps.h</i> 
  in the Windows Driver Kit (WDK).
</blockquote>
<p>As if to prove that Microsoft writes its Windows documentation first for its 
own programmers and support staff, and as something of an afterthought for 
programmers in general, no PS.H is present in any known edition of the WDK or of 
any earlier Device Driver Kit (DDK).
</p>
<p>The “possible quota type values” are disclosed as type information in public 
symbol files for the kernel in Windows XP and Windows Server 2003. The type 
then disappears even from the public symbol files (as do the
<span class="struct">EPROCESS_QUOTA_BLOCK</span> and the <span class="struct">
EPROCESS_QUOTA_ENTRY</span>).
</p>
<h2>Values </h2>
<p>Names and values are reproduced below from the public symbol files for the 
kernel in versions 5.1 and 5.2. Microsoft’s names for the types added in version 6.0 may never be known. </p>
<table>
  <tr>
    <th>Value </th>
    <th>Name </th>
    <th>Versions </th>
  </tr>
  <tr>
    <td>0 </td>
    <td><span class="constant">PsNonPagedPool</span> </td>
    <td>5.1 and higher </td>
  </tr>
  <tr>
    <td>1 </td>
    <td><span class="constant">PsPagedPool</span> </td>
    <td>5.1 and higher </td>
  </tr>
  <tr>
    <td>2 </td>
    <td><span class="constant">PsPageFile</span> </td>
    <td>5.1 and higher </td>
  </tr>
  <tr>
    <td>3 </td>
    <td>working set pages </td>
    <td>6.0 and higher </td>
  </tr>
  <tr>
    <td>4 </td>
    <td>CPU rate limit </td>
    <td>6.0 to 6.2 </td>
  </tr>
  <tr>
    <td>3 (5.1 to 5.2); <br>
    5 (6.0 to 6.2); <br>
    4 </td>
    <td><span class="constant">PsQuotaTypes</span> </td>
    <td>5.1 and higher </td>
  </tr>
</table>
<p>That the <span class="enum">PS_QUOTA_TYPE</span> continues to version 6.0 and 
beyond seems more than merely plausible, but it may not be the whole story in 
these versions. Version 6.0 introduces several internal variables that are 
arrays indexed by the <span class="enum">PS_QUOTA_TYPE</span> or by something 
very like it. These arrays each have five members up to and including version 
6.2. </p>
<div class="Footer">
  <p class="Dates">This page was created on 18th
  <a href="../../../../../../../new/17/10.htm">October 2017</a> and was last modified 
  on 4th December 2020. </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c1720.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2017-2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="5021" -->
</div>

</body>

</html>
