<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>NTDLL</title>
<link rel="stylesheet" type="text/css" href="../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../_styles/win32.css">
<script type="text/javascript" src="../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../_scripts/win32.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="6863" -->
<h1>NTDLL </h1>
<p>NTDLL is the user-mode face of the Windows kernel to support any number of application-level 
subsystems. In the Win32 subsystem, which accounts for far and away the greatest 
number of Windows executables in ordinary use, the lowest layer is provided by such 
modules as KERNEL32.DLL and ADVAPI32.DLL. Many functions that NTDLL exports are 
simply re-exported as KERNEL32 or ADVAPI32 functions. Put another way, some KERNEL32 
and ADVAPI32 functions have no code in those DLLs but instead appear in the export 
directory of those DLLs only as forwards to NTDLL. For many more NTDLL functions, 
there is some KERNEL32 or ADVAPI32 function whose code in those DLLs just repackages 
the NTDLL function, e.g., to change the arguments slightly. </p>
<p>Strictly speaking then, NTDLL is not a Win32 component but a lower-level platform 
on which Win32 is built. Yet, as ever with Microsoft, the practice and theory are 
not wholly in sync. Rather many Win32 executables that Microsoft supplies with Windows 
cut past KERNEL32 and ADVAPI32 and import directly from NTDLL. These are admittedly 
very low-level executables but not all of them are integral to the Win32 subsystem. 
Many are of a general type, namely services, that Microsoft plainly does intend 
can be written by non-Microsoft programmers. It is not obviously satisfactory that 
when Microsoft’s programmers write such programs, they use NTDLL functions that 
are not documented for use by non-Microsoft programmers when writing similar programs.
</p>
<p>For these notes, I have chosen to follow the practice rather than what looks 
to be the theoretical architecture, and I count NTDLL in the Win32 subsystem. Note, 
however, that where I document any functions of the <a href="api/native.htm">Native 
API</a>, i.e., those functions whose names begin with <span class="function">Nt</span> 
or <span class="function">Zw</span>, I do so in the <a href="../../km/index.htm">
Kernel</a> section even if the function is exported only from NTDLL. </p>
<div class="Footer">
  <!--webbot bot="Include" U-Include="../_include/c0816.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2008-2016. Geoff Chappell. All rights reserved. 
<a href="../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="49224" -->
</div>

</body>

</html>
