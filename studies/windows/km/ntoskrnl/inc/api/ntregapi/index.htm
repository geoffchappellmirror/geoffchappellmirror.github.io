<html>

<head>
<title>NTREGAPI.H</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="29544" -->
<h1>NTREGAPI.H </h1>
<p>Symbol files that Microsoft has published for Windows 8 and higher tell of user-mode 
code that is compiled with the NTREGAPI.H header at </p>
<blockquote>
  d:\th.public.fre\internal\sdk\inc\minwin
</blockquote>
<p>The header NTREGAPI.H is not known to have been published by Microsoft. None 
of the types that it is known to define appear in any published header. NTREGAPI.H 
thus looks to be Microsoft’s private header for parts of the kernel’s Registry API 
that Microsoft regards as being for the use of its own user-mode binaries but of 
nobody else’s. The public parts are defined in the unpublished NTREGAPI_X.H and 
are shared with published headers such as WDM.H and WINNT.H. </p>
<h2>User-Defined Types </h2>
<p>The table below is of types that are defined in NTREGAPI.H as known from
<span class="constant">LF_UDT_MOD_SRC_LINE</span> (0x1607) records in symbol files 
for the original release of Windows 10. </p>
<table>
  <colgroup>
    <col class="LineNumber"><col class="Name">
  </colgroup>
  <tr>
    <th>Line Number </th>
    <th>Type </th>
  </tr>
  <tr>
    <td>82 </td>
    <td>struct <span class="struct">_KEY_FLAGS_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>90 </td>
    <td>struct <span class="struct">_KEY_HANDLE_TAGS_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>98 </td>
    <td>enum <span class="enum">_REG_ACTION</span> </td>
  </tr>
  <tr>
    <td>104 </td>
    <td>struct <span class="struct">_REG_NOTIFY_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>111 </td>
    <td>struct <span class="struct">KEY_PID_ARRAY</span> </td>
  </tr>
  <tr>
    <td>116 </td>
    <td>struct <span class="struct">_KEY_OPEN_SUBKEYS_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>150 </td>
    <td>enum <span class="enum">_JOURNAL_CHANGE_INFORMATION_CLASS</span> </td>
  </tr>
  <tr>
    <td>165 </td>
    <td>struct <span class="struct">_JOURNAL_CREATE_DELETE_KEY_INFORMATION</span>
    </td>
  </tr>
  <tr>
    <td>177 </td>
    <td>struct <span class="struct">_JOURNAL_RENAME_KEY_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>185 </td>
    <td>struct <span class="struct">_JOURNAL_SET_DELETE_VALUE_INFORMATION</span>
    </td>
  </tr>
  <tr>
    <td>199 </td>
    <td>struct <span class="struct">_JOURNAL_SET_KEY_SECURITY_INFORMATION</span>
    </td>
  </tr>
  <tr>
    <td>210 </td>
    <td>struct <span class="struct">_JOURNAL_SET_KEY_USER_FLAGS_INFORMATION</span>
    </td>
  </tr>
  <tr>
    <td>219 </td>
    <td>struct <span class="struct">_JOURNAL_SET_KEY_LAST_WRITE_TIME_INFORMATION</span>
    </td>
  </tr>
  <tr>
    <td>228 </td>
    <td>struct <span class="struct">_JOURNAL_TRANSACTION_BOUNDARY_INFORMATION</span>
    </td>
  </tr>
  <tr>
    <td>244 </td>
    <td>enum <span class="enum">_JOURNAL_INFORMATION_CLASS</span> </td>
  </tr>
  <tr>
    <td>250 </td>
    <td>struct <span class="struct">_JOURNAL_ABSOLUTE_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>257 </td>
    <td>struct <span class="struct">_JOURNAL_CLIENT_INFORMATION</span> </td>
  </tr>
</table>
<h2>Anti-Trust Settlement Forensics </h2>
<p>Do not miss that one of the symbol files that show access to these private definitions 
for the Registry API is URLMON.PDB. The corresponding binary is URLMON.DLL, which 
was introduced for Internet Explorer as long ago as 1996 and still has its version 
numbers in step with those of Internet Explorer. In 2002, Microsoft settled an anti-trust 
suit which had as one element that something called Microsoft middleware—Internet 
Explorer being specified as an example—should have no more access to any Windows 
interface than is available to competing software. </p>
<p>Clearly, the source code for Internet Explorer as built for Windows 8, and since, 
uses an essentially secret header for the user-mode interface that the kernel exposes 
for registry access. This source-code access contravenes any plain reading of the 
settlement. If it is new for Windows 8, then the settlement evidently did not constrain 
Microsoft for long. If Internet Explorer had this access at the time of the settlement, 
then Microsoft didn’t disclose it or the courts and regulators either missed it 
or excused it. </p>
<div class="Footer">
  <p class="Dates">This page was created on 24th
  <a href="../../../../../../../new/20/12.htm">December 2020</a> and was last modified 
  on 27th December 2020. </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c20.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="5634" -->
</div>

</body>

</html>
