<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>THROBJHEAD</title>
<link rel="stylesheet" type="text/css" href="../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/win32.css">
<script type="text/javascript" src="../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/win32.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="21016" -->
<h1>THROBJHEAD </h1>
<p>The <span class="struct">THROBJHEAD</span> structure is the smallest header for 
user objects that can be owned by a thread. In some sense it begins all such objects, 
since the larger header for thread-owned objects either has an unnamed
<span class="struct">THROBJHEAD</span> as its first member or reproduces the
<span class="struct">THROBJHEAD</span> members. Of user objects whose names and 
structural details are known from public symbol files, only the
<span class="struct">SVR_INSTANCE_INFO</span> and <span class="struct">TOUCHINPUTINFO</span> 
begin with a <span class="struct">THROBJHEAD</span> named <span class="member">head</span>. 
It is presently thought, however, that the <span class="struct">DDECONV</span>,
<span class="struct">EVENTHOOK</span>, <span class="struct">GESTUREINFO</span>,
<span class="struct">HIDDATA</span>, <span class="struct">SMWP</span> and
<span class="struct">XSTATE</span> also begin with a <span class="struct">THROBJHEAD</span>.
</p>
<p>The <span class="struct">THROBJHEAD</span> changes size through the early versions 
but only from variations in its own header. </p>
<table class="Sizes">
  <colgroup>
    <col class="Version"><col class="Size" span="2">
  </colgroup>
  <tr>
    <th>Version </th>
    <th>Size (x86) </th>
    <th>Size (x64) </th>
  </tr>
  <tr>
    <td>3.51 </td>
    <td>0x10 </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>4.0 </td>
    <td>0x14 </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>5.0 to 10.0 </td>
    <td>0x0C </td>
    <td>0x18 </td>
  </tr>
</table>
<p>The point to the <span class="struct">THROBJHEAD</span> is to add to the basic 
header the notion of an owning thread. It is here thought that the structure does 
not exist in version 3.10, which has ownership by either thread or process built 
in to the basic header. </p>
<table>
  <colgroup>
    <col class="Offset" span="2"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset (x86) </th>
    <th>Offset (x64) </th>
    <th>Definition </th>
    <th>Versions </th>
  </tr>
  <tr>
    <td rowspan="3">0x00 </td>
    <td rowspan="3">0x00 </td>
    <td>
    <pre class="source"><a href="head.htm">HEAD</a>;</pre>
    </td>
    <td>3.51 only </td>
  </tr>
  <tr>
    <td>
    <pre class="source"><a href="shrobjhead.htm">SHROBJHEAD</a>;</pre>
    </td>
    <td>4.0 only </td>
  </tr>
  <tr>
    <td>
    <pre class="source">HEAD;</pre>
    </td>
    <td>5.0 and higher </td>
  </tr>
  <tr>
    <td>0x0C (3.51); <br>
    0x10 (4.0); <br>
    0x08 </td>
    <td>0x10 </td>
    <td>
    <pre class="source"><a href="../../../km/win32k/structs/threadinfo/index.htm">THREADINFO</a> *pti;</pre>
    </td>
    <td>3.51 and higher </td>
  </tr>
</table>
<p>See that even if the object is visible in user mode, the thread that owns the 
object is represented by the kernel-mode address of its <span class="struct">THREADINFO</span>.
</p>
<div class="Footer">
  <p class="Dates">This page was created on 9th August 2017 but was not published 
  until 10th <a href="../../../../../new/17/09.htm">September 2017</a>. </p>
  <!--webbot bot="Include" U-Include="../../_include/c17.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2017. Geoff Chappell. All rights reserved. 
<a href="../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="47327" -->
</div>

</body>

</html>
