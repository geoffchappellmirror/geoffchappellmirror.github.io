<html>

<head>
<title>NTI386_X.H</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="54033" -->
<h1>NTI386_X.H </h1>
<p>The public symbol file NTKRPAMP.PDB for the original release of Windows 10 tells 
that the kernel is built with the NTI386_X.H header at </p>
<blockquote>
  d:\th.public.fre\internal\sdk\inc
</blockquote>
<p>and draws from it the type definitions that are tabulated below. The header 
NTI386_X.H is not known in any Device Driver Kit (DDK) or Windows Driver Kit 
(WDK), but all the types that the kernel is known to pick up from it are defined 
in the standard header NTDDK.H. The line numbers on the left are from the unseen 
NTI386_X.H but are known from the symbol file. Those on the right are from the 
NTDDK.H that is readily available in the WDK for Windows 10. </p>
<table>
  <colgroup>
    <col class="LineNumber"><col class="Name"><col class="LineNumber">
  </colgroup>
  <tr>
    <th>Line Number </th>
    <th>Type </th>
    <th>NTDDK.H </th>
  </tr>
  <tr>
    <td>1149 </td>
    <td>struct <span class="struct">_FLOATING_SAVE_AREA</span> </td>
    <td>307 </td>
  </tr>
  <tr>
    <td>1190 </td>
    <td>struct <span class="struct">_CONTEXT</span> </td>
    <td>335 </td>
  </tr>
</table>
<p>It is not 
known whether NTI386_X.H is the source of the definitions in NTDDK.H or whether both 
are constructed from some script or master header. The difference seems unlikely 
to matter in practice and it’s convenient to speak of NTI386_X.H as the master 
from which content is extracted to the standard headers. WDM.H, NTDDK.H and some 
others each have a contiguous set of lines that can with good confidence be 
identified as having been extracted in broken sequences from NTI386_X.H: </p>
<ul>
  <li>WDM.H lines 475 to 1354; </li>
  <li>NTDDK.H lines 109 to 431; </li>
  <li>MINIPORT.H lines 3880 to 4741; </li>
  <li>WINNT.H lines 6143 to 7294. </li>
</ul>
<p>The immediately preceding lines in WDM.H are similarly from NTKEAPI_X.H. For 
NTDDK.H, NTI386_X.H is the first known input. NTI386_X.H is, of course, specific 
to the i386 processor architecture. Its contributions to both WDM.H and NTDDK.H 
are followed in turn by extracts from NTAMD64_X.H, NTARM_X.H and presumably an 
NTARM64_X.H. For who knows what reason, the order is different in MINIPORT.H and 
WINNT.H, which have their extractions from NTI386_X.H last. </p>
<p>The arm and arm64 architectures are ordinarily irrelevant to this study, but 
it happens that Microsoft has published NTARM_X.H. It is in the WDK for Windows 
10 from the original release up to and including the 1803 edition, but 
apparently not since. It’s in the “um” subdirectory for user-mode programming 
and is included from only one other header, named NTARM.H, which is in turn not 
included from any other. Still, published it is. </p>
<h2>NTI386.H </h2>
<p>Though the public symbol files for the kernel make no mention of it, there is 
an NTI386.H in the same directory. This is known from private symbol files that 
Microsoft has distributed in packages of otherwise public symbol files. All 
these private symbols are for user-mode modules. Some, such as URLMON.DLL from 
Internet Explorer, are very far removed from kernel-mode programming, but let’s 
leave that wonder for some other time. If NTI386.H for the i386 processor 
architecture follows the pattern of NTARM.H and NTARM_X.H, then NTI386.H 
includes NTI386_X.H. It’s not impossible, and may even be likely, that the 
kernel’s source code includes NTI386.H but just doesn’t use any of its contents 
in a way that survives into the public symbol files. </p>
<table>
  <colgroup>
    <col class="LineNumber"><col class="Name">
  </colgroup>
  <tr>
    <th>Line Number </th>
    <th>Type </th>
  </tr>
  <tr>
    <td>90 </td>
    <td>struct <span class="struct">_FNSAVE_FORMAT</span> </td>
  </tr>
  <tr>
    <td>122 </td>
    <td>struct <span class="struct">_FXSAVE_FORMAT</span> </td>
  </tr>
  <tr>
    <td>156 </td>
    <td>struct <span class="struct">_LDT_INFORMATION</span> </td>
  </tr>
  <tr>
    <td>167 </td>
    <td>struct <span class="struct">_LDT_SIZE</span> </td>
  </tr>
  <tr>
    <td>181 </td>
    <td>struct <span class="struct">_DESCRIPTOR_TABLE_ENTRY</span> </td>
  </tr>
</table>
<p>&nbsp;</p>
<div class="Footer">
  <p class="Dates">This page was created on 26th
  <a href="../../../../../../new/20/10.htm">October 2020</a>. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c20.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="61845" -->
</div>

</body>

</html>
