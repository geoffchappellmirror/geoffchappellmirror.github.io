<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>NTRTL_X.H</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="43332" -->
<h1>NTRTL_X.H </h1>
<p>The public symbol file NTKRPAMP.PDB for the original release of Windows 10 tells 
that the kernel is built with the NTRTL_X.H header at </p>
<blockquote>
  d:\th.public.fre\internal\minwin\priv_sdk\inc
</blockquote>
<p>and draws from it the type definitions that are shown in the table below. </p>
<p>The header NTRTL_X.H is not known in any Device Driver Kit (DDK) or Windows Driver 
Kit (WDK), but all the types that the kernel is known to pick up from NTRTL_X.H 
are defined in at least one of the standard headers that are included by the source 
code for almost all kernel-mode projects (even the HAL). </p>
<table>
  <colgroup>
    <col class="LineNumber"><col class="Name"><col class="LineNumber" span="4">
  </colgroup>
  <tr>
    <th>Line Number </th>
    <th>Type </th>
    <th>WDM.H </th>
    <th>NTDDK.H </th>
    <th>NTIFS.H </th>
    <th>NTOSP.H </th>
  </tr>
  <tr>
    <td>129 </td>
    <td>union <span class="union">_SLIST_HEADER</span> </td>
    <td>10527 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>190 </td>
  </tr>
  <tr>
    <td>1058 </td>
    <td>enum <span class="enum">_RTL_GENERIC_COMPARE_RESULTS</span> </td>
    <td>&nbsp;</td>
    <td>1947 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>1181 </td>
    <td>struct <span class="struct">_RTL_BALANCED_LINKS</span> </td>
    <td>&nbsp;</td>
    <td>2070 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>1198 </td>
    <td>struct <span class="struct">_RTL_AVL_TABLE</span> </td>
    <td>&nbsp;</td>
    <td>2087 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>1611 </td>
    <td>struct <span class="struct">_RTL_SPLAY_LINKS</span> </td>
    <td>&nbsp;</td>
    <td>2500 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>2270 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE_ENTRY</span> </td>
    <td>&nbsp;</td>
    <td>3159 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>2303 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE_CONTEXT</span> </td>
    <td>&nbsp;</td>
    <td>3192 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>2309 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE_ENUMERATOR</span>
    </td>
    <td>&nbsp;</td>
    <td>3198 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>2318 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE</span> </td>
    <td>&nbsp;</td>
    <td>3207 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>4810 </td>
    <td>struct <span class="struct">_COMPRESSED_DATA_INFO</span> </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>3065 </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>5987 </td>
    <td>struct <span class="struct">_TIME_FIELDS</span> </td>
    <td>12718 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>6501 </td>
    <td>struct <span class="struct">_RTL_BITMAP</span> </td>
    <td>13054 </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>Clues have abounded since version 3.10 that these standard headers are constructed 
from others. If NTRTL_X.H is among these others, then it is the first that is known 
to contribute to NTOSP.H. As far as can be seen from consistency in line numbering, 
the lines in NTDDK.H are extracted intact. </p>
<h2>Anti-Trust Settlement Forensics </h2>
<p>For the record, here are the many more types that Microsoft’s freely published 
URLMON.PDB reveals were accessible to the source code for URLMON.DLL from including 
this same NTRTL_X.H when building Internet Explorer for the original release of 
32-bit Windows 10: </p>
<table>
  <colgroup>
    <col class="LineNumber"><col class="Name">
  </colgroup>
  <tr>
    <th>Line Number </th>
    <th>Type </th>
  </tr>
  <tr>
    <td>257 </td>
    <td>union <span class="struct">_RTL_RUN_ONCE_INTERNAL</span> </td>
  </tr>
  <tr>
    <td>348 </td>
    <td>unnamed struct for <span class="member">DUMMYRESERVEDSTRUCTNAME</span>
    <br>
    in unnamed union <br>
    in struct <span class="struct"><a href="../../inc/shared/ntrtl_x/rtl_barrier.htm">_RTL_BARRIER</a></span>
    </td>
  </tr>
  <tr>
    <td>370 </td>
    <td>union <span class="union">_RTL_ELEVATION_FLAGS</span> </td>
  </tr>
  <tr>
    <td>1047 </td>
    <td>enum <span class="enum">_TABLE_SEARCH_RESULT</span> </td>
  </tr>
  <tr>
    <td>1058 </td>
    <td>enum <span class="enum">_RTL_GENERIC_COMPARE_RESULTS</span> </td>
  </tr>
  <tr>
    <td>1181 </td>
    <td>struct <span class="struct">_RTL_BALANCED_LINKS</span> </td>
  </tr>
  <tr>
    <td>1198 </td>
    <td>struct <span class="struct">_RTL_AVL_TABLE</span> </td>
  </tr>
  <tr>
    <td>1611 </td>
    <td>struct <span class="struct">_RTL_SPLAY_LINKS</span> </td>
  </tr>
  <tr>
    <td>1985 </td>
    <td>struct <span class="struct">_RTL_GENERIC_TABLE</span> </td>
  </tr>
  <tr>
    <td>2270 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE_ENTRY</span> </td>
  </tr>
  <tr>
    <td>2303 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE_CONTEXT</span> </td>
  </tr>
  <tr>
    <td>2309 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE_ENUMERATOR</span>
    </td>
  </tr>
  <tr>
    <td>2318 </td>
    <td>struct <span class="struct">_RTL_DYNAMIC_HASH_TABLE</span> </td>
  </tr>
  <tr>
    <td>2660 </td>
    <td>struct <span class="struct">_RTL_HEAP_PARAMETERS</span> </td>
  </tr>
  <tr>
    <td>3067 </td>
    <td>struct <span class="struct">_RTL_QUERY_REGISTRY_TABLE</span> </td>
  </tr>
  <tr>
    <td>3334 </td>
    <td>struct <span class="struct">_RTL_LFG_RNG_STATE</span> </td>
  </tr>
  <tr>
    <td>4542 </td>
    <td>struct <span class="struct">_GENERATE_NAME_CONTEXT</span> </td>
  </tr>
  <tr>
    <td>4633 </td>
    <td>struct <span class="struct">_PREFIX_TABLE_ENTRY</span> </td>
  </tr>
  <tr>
    <td>4642 </td>
    <td>struct <span class="struct">_PREFIX_TABLE</span> </td>
  </tr>
  <tr>
    <td>4703 </td>
    <td>struct <span class="struct">_UNICODE_PREFIX_TABLE_ENTRY</span> </td>
  </tr>
  <tr>
    <td>4713 </td>
    <td>struct <span class="struct">_UNICODE_PREFIX_TABLE</span> </td>
  </tr>
  <tr>
    <td>4810 </td>
    <td>struct <span class="struct">_COMPRESSED_DATA_INFO</span> </td>
  </tr>
  <tr>
    <td>5987 </td>
    <td>struct <span class="struct">_TIME_FIELDS</span> </td>
  </tr>
  <tr>
    <td>6501 </td>
    <td>struct <span class="struct">_RTL_BITMAP</span> </td>
  </tr>
  <tr>
    <td>6689 </td>
    <td>struct <span class="struct">_RTL_BITMAP_RUN</span> </td>
  </tr>
  <tr>
    <td>7793 </td>
    <td>struct <span class="struct">_OSVERSIONINFOEX2A</span> </td>
  </tr>
  <tr>
    <td>7808 </td>
    <td>struct <span class="struct">_OSVERSIONINFOEX2W</span> </td>
  </tr>
  <tr>
    <td>7861 </td>
    <td>struct <span class="struct">_OSVERSIONINFOEXA</span> </td>
  </tr>
  <tr>
    <td>7874 </td>
    <td>struct <span class="struct">_OSVERSIONINFOEXW</span> </td>
  </tr>
  <tr>
    <td>8244 </td>
    <td>struct <span class="struct">_RTL_UMS_CONTEXT</span> </td>
  </tr>
  <tr>
    <td>8324 </td>
    <td>struct <span class="struct">_RTL_UMS_COMPLETION_LIST</span> </td>
  </tr>
  <tr>
    <td>8381 </td>
    <td>struct <span class="struct">_RTL_UMS_SCHEDULER_STARTUP_INFO</span> </td>
  </tr>
  <tr>
    <td>8529</td>
    <td>enum <span class="enum">_APPCONTAINER_SID_TYPE</span> </td>
  </tr>
</table>
<p>URLMON knows the <span class="struct">_RTL_BARRIER</span> structure from including 
WINNT.H, but what it gets from this is only a reduced definition. The
<span class="struct">_RTL_BARRIER</span> in NTRTL_X.H has this same reduced definition 
nested two levels within as a member named <span class="member">DUMMYRESERVEDSTRUCTNAME</span>. 
WINNT.H retains nothing of the nesting except for its (otherwise excessive) indentation.
</p>
<p>The <span class="union">_RTL_RUN_ONCE_INTERNAL</span> at line 257 is named
<span class="union">_RTL_RUN_ONCE</span> in other symbol files. It too has a reduced 
definition in WINNT.H. URLMON has both definitions, the one in NTRTL_X.H apparently 
being renamed by macro to avoid confusion. Further study may be worthwhile. </p>
<div class="Footer">
  <p class="Dates">This page was created on 23rd July 2020 but was not published 
  until 25th <a href="../../../../../../new/20/10.htm">October 2020</a>. It was 
  last modified on 21st December 2020. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c20.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2020. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="61845" -->
</div>

</body>

</html>
