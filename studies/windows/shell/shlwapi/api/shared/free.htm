<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 12.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SHFreeShared</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/shell.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js">
</script>
<script type="text/javascript" src="../../../_scripts/shell.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell - Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" i-checksum="55064" endspan -->
<h1>SHFreeShared </h1>
<p>This function destroys a shared memory area. </p>
<h2>Declaration </h2>
<pre class="source">BOOL
SHFreeShared (
    HANDLE hData,
    DWORD dwProcessId);</pre>
<h3>Parameters </h3>
<p>The <span class="argument">hData</span> argument is a handle to the shared 
memory.
</p>
<p>The <span class="argument">dwProcessId</span> argument is the process 
identifier (PID) of the process that provides the context for interpreting the 
given handle.
</p>
<h3>Return Value </h3>
<p>The function returns a non-zero value if successful, else FALSE. </p>
<h2>Behaviour </h2>
<p>If the <span class="argument">hData</span> argument is NULL, the function 
returns TRUE. </p>
<p>The function treats the <span class="argument">hData</span> and
<span class="argument">dwProcessId</span> arguments as a pair that together 
identify the shared memory. In general, <span class="argument">hData</span> will 
have been the result of some earlier call to <span class="function"><a href="alloc.htm">
SHAllocShared</a></span> 
(possibly in some other process) and <span class="argument">dwProcessId</span> 
will have been the last of the arguments given in that same call to
<span class="function">SHAllocShared</span>. </p>
<p>The handle refers to a file-mapping object that contains the shared memory. 
However, the handle is meaningful in the context of the given process, which 
need not be the current process. The function duplicates the given handle into 
the context of the current process, simultaneously closing the given handle. The 
function then closes the duplicate handle. </p>
<p>Once this function is called, the handle given by <span class="argument">
hData</span> 
should be regarded as invalid. There should be no further attempts to access the 
shared memory by passing this handle to <span class="function">
<a href="lock.htm">SHLockShared</a></span> or <span class="function">
<a href="lockex.htm">SHLockSharedEx</a></span>. Existing access to the shared 
memory, through views that have not yet been unmapped, remains valid. The 
file-mapping object gets released and the shared memory area destroyed when all 
outstanding views are eventually unmapped. </p>
<h2>Availability </h2>
<p>The <span class="function">SHFreeShared </span>function is exported from 
SHLWAPI.DLL as ordinal 10 in version 4.71 and higher. </p>
<!--webbot bot="Include" U-Include="../_include/undoc471.htm" TAG="BODY" startspan -->

<p>Though this function dates from as long ago as 1997, it was still not 
documented by Microsoft in the MSDN Library at least as late as the CD edition 
dated January 2004. </p>

<!--webbot bot="Include" i-checksum="43173" endspan -->
<p>The function also exists indirectly as an export from SHELL32.DLL. Indeed, 
this existence predates its implementation in SHLWAPI. The NT releases of 
SHELL32 version 4.00, as long ago as 1996, and all releases of later SHELL32 
versions export
<span class="function">SHFreeShared</span> as ordinal 523. From SHELL32 version 
4.71, the implementation in SHELL32 is just a jump to the corresponding 
implementation imported from SHLWAPI. Late builds of SHELL32 version 6.00 export 
the function by name. This change may be related to Microsoft’s programme of 
documenting interfaces for compliance with a consent decree. A SHELL32 function 
named
<span class="function">SHFreeShared</span>&nbsp; was documented among the
<a target="_top" href="http://msdn.microsoft.com/library/ms807073.aspx">
Settlement Program Interfaces</a> in December 2002. The function is said there 
to require SHELL32 “version 5.0 or later”, as if to ignore three years or more 
of earlier existence. </p>
<div class="Footer">
  <p class="Dates">This page was created on 3rd September 2004 and was last 
  modified on 15th March 2007. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c0407.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2004-2007. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" i-checksum="54855" endspan -->
</div>

</body>

</html>