<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>MOVESIZEDATA</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="54033" -->
<h1>MOVESIZEDATA </h1>
<p>The <span class="struct">MOVESIZEDATA</span> structure is what WIN32K.SYS—and 
before it, WINSRV.DLL—keeps while moving or sizing a window. </p>
<h2>Documentation Status </h2>
<p>The <span class="struct">MOVESIZEDATA</span> is not documented. Though symbol files for 
WIN32K.SYS in Windows 8 and higher name the
<span class="struct">MOVESIZEDATA</span> in the C++ decorations of internal routines, 
type information for the structure is present only in symbol files for Windows 7—not 
before and not since. </p>
<h2>Layout </h2>
<p>Originally, the <span class="struct">MOVESIZEDATA</span> was nested in the
<span class="struct"><a href="../threadinfo/index.htm">THREADINFO</a></span>. 
Version 3.51 instead formed it on the stack and pointed to it from the
<span class="struct">THREADINFO</span>. Since version 4.0, it is in per-session 
paged pool. The following changes of size are known: </p>
<table class="Sizes">
  <colgroup>
    <col class="Version"><col class="Size" span="2">
  </colgroup>
  <tr>
    <th>Version </th>
    <th>Size (x86) </th>
    <th>Size (x64) </th>
  </tr>
  <tr>
    <td>3.10 </td>
    <td>0x7C </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>3.51 </td>
    <td>0x68 </td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>4.0 to 6.0 </td>
    <td>0x74 </td>
    <td>0x78 </td>
  </tr>
  <tr>
    <td>6.1 to 6.2 </td>
    <td>0xDC </td>
    <td>0xF0 </td>
  </tr>
  <tr>
    <td>6.3 </td>
    <td>0xF0 </td>
    <td>0x0108 </td>
  </tr>
  <tr>
    <td>10.0 </td>
    <td>0x012C </td>
    <td>0x0140 </td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table>
  <colgroup><col class="Offset" span="2"><col class="Definition"></colgroup>
  <tr>
    <th>Offset (x86) </th>
    <th>Offset (x64) </th>
    <th>Definition </th>
    <th>Versions </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>0x00 </td>
    <td>
    <pre class="source">WND *spWnd;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x04 </td>
    <td>0x08 </td>
    <td>
    <pre class="source">RECT rcDrag;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x14 </td>
    <td>0x18 </td>
    <td>
    <pre class="source">RECT rcDragCursor;</pre>
    </td>
    <td>
    4.0 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x24 (6.1) </td>
    <td>0x28 (6.1) </td>
    <td>
    <pre class="source">RECT rcPreview;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x34 (6.1) </td>
    <td>0x38 (6.1) </td>
    <td>
    <pre class="source">RECT rcPreviewCursor;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x14 (3.10 to 3.51); <br>
    0x24 (4.0 to 6.0); <br>
    0x44 (6.1) </td>
    <td>0x28 (5.2 to 6.0); <br>
    0x48 (6.1) </td>
    <td>
    <pre class="source">RECT rcParent;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x24 (3.10 to 3.51); <br>
    0x34 (4.0 to 6.0); <br>
    0x54 (6.1) </td>
    <td>0x38 (5.2 to 6.0); <br>
    0x58 (6.1) </td>
    <td>
    <pre class="source">POINT ptMinTrack;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x2C (3.10 to 3.51); <br>
    0x3C (4.0 to 6.0); <br>
    0x5C (6.1) </td>
    <td>0x40 (5.2 to 6.0); <br>
    0x60 (6.1) </td>
    <td>
    <pre class="source">POINT ptMaxTrack;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x34 (3.10 to 3.51); <br>
    0x44 (4.0 to 6.0) ; <br>
    0x64 (6.1) </td>
    <td>0x48 (5.2 to 6.0); <br>
    0x68 (6.1) </td>
    <td>
    <pre class="source">RECT rcWindow;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x74 (6.1) </td>
    <td>0x78 (6.1) </td>
    <td>
    <pre class="source">RECT rcNormalStartCheckPt;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x44 (3.10 to 3.51); <br>
    0x54 (4.0 to 6.0); <br>
    0x84 (6.1) </td>
    <td>0x58 (5.2 to 6.0); <br>
    0x88 (6.1) </td>
    <td>
    <pre class="source">INT dxMouse;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x48 (3.10 to 3.51); <br>
    0x58 (4.0 to 6.0); <br>
    0x88 (6.1) </td>
    <td>0x5C (5.2 to 6.0); <br>
    0x8C (6.1) </td>
    <td>
    <pre class="source">INT dyMouse;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x4C (3.10 to 3.51); <br>
    0x5C (4.0 to 6.0); <br>
    0x8C (6.1) </td>
    <td>0x60 (5.2 to 6.0); <br>
    0x90 (6.1) </td>
    <td>
    <pre class="source">INT cmd;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x50 (3.10 to 3.51); <br>
    0x60 (4.0 to 6.0); <br>
    0x90 (6.1) </td>
    <td>0x64 (5.2 to 6.0); <br>
    0x94 (6.1) </td>
    <td>
    <pre class="source">INT impx;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x54 (3.10 to 3.51); <br>
    0x64 (4.0 to 6.0); <br>
    0x94 (6.1) </td>
    <td>0x68 (5.2 to 6.0); <br>
    0x98 (6.1) </td>
    <td>
    <pre class="source">INT impy;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x58 (3.10 to 3.51); <br>
    0x68 (4.0 to 6.0); <br>
    0x98 (6.1) </td>
    <td>0x6C (5.2 to 6.0); <br>
    0x9C (6.1) </td>
    <td>
    <pre class="source">POINT ptRestore;</pre>
    </td>
    <td>
    all
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x60 (3.10 to 3.51) </td>
    <td>&nbsp;</td>
    <td>
    unknown pointer
    </td>
    <td>
    3.10 to 3.51
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x64 (3.10) </td>
    <td>&nbsp;</td>
    <td>
    <pre class="source">BOOL fInitSize;</pre>
    </td>
    <td>
    3.10 only
    </td>
    <td>
    next as bit in <span class="member">Flags</span>
    </td>
  </tr>
  <tr>
    <td>0x68 (3.10) </td>
    <td>&nbsp;</td>
    <td>
    <pre class="source">BOOL fmsKbd;</pre>
    </td>
    <td>
    3.10 only
    </td>
    <td>
    next as bit in <span class="member">Flags</span>
    </td>
  </tr>
  <tr>
    <td>0x6C (3.10) </td>
    <td>&nbsp;</td>
    <td>
    unknown <span class="type">BOOL</span>
    </td>
    <td>
    3.10 only
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x70 (3.10) </td>
    <td>&nbsp;</td>
    <td>
    unaccounted four bytes
    </td>
    <td>
    3.10 only
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0x74 (3.10) </td>
    <td>&nbsp;</td>
    <td>
    <pre class="source">BOOL fTrackCancelled;</pre>
    </td>
    <td>
    3.10 only
    </td>
    <td>
    next as bit in <span class="member">Flags</span>
    </td>
  </tr>
  <tr>
    <td>0x78 (3.10) </td>
    <td>&nbsp;</td>
    <td>
    <pre class="source">BOOL fForeground;</pre>
    </td>
    <td>
    3.10 only
    </td>
    <td>
    next as bit in <span class="member">Flags</span>; <br>
    last member in 3.10
    </td>
  </tr>
  <tr>
    <td>0x64 (3.51); <br>
    0x70 (4.0 to 6.0); <br>
    0xA0 (6.1) </td>
    <td>0x74 (5.2 to 6.0); <br>
    0xA4 (6.1) </td>
    <td>
    <pre class="source">union {
    ULONG <a href="flags.htm">Flags</a>; 
    struct {
        /*  bit fields, follow link  */
    };
};</pre>
    </td>
    <td>
    3.51 and higher
    </td>
    <td>
    last member in 3.51 to 6.0
    </td>
  </tr>
  </table>
<h3>Appended for Windows 7 </h3>
<table>
  <colgroup><col class="Offset" span="2"><col class="Definition"></colgroup>
  <tr>
    <th>Offset (x86) </th>
    <th>Offset (x64) </th>
    <th>Definition </th>
    <th>Versions </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td>0xA4 (6.1) </td>
    <td>0xA8 (6.1) </td>
    <td>
    <pre class="source">MONITOR *pStartMonitorCurrentHitTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xA8 (6.1) </td>
    <td>0xB0 (6.1) </td>
    <td>
    <pre class="source">eTHRESHOLD_MARGIN_DIRECTION StartCurrentHitTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xAC (6.1) </td>
    <td>0xB8 (6.1) </td>
    <td>
    <pre class="source">MONITOR *pMonitorCurrentHitTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xB0 (6.1) </td>
    <td>0xC0 (6.1) </td>
    <td>
    <pre class="source">eTHRESHOLD_MARGIN_DIRECTION CurrentHitTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xB4 (6.1) </td>
    <td>0xC4 (6.1) </td>
    <td>
    <pre class="source">MOVERECT_STYLE MoveRectStyle;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xB8 (6.1) </td>
    <td>0xC8 (6.1) </td>
    <td>
    <pre class="source">POINT ptHitWindowRelative;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xC0 (6.1) </td>
    <td>0xD0 (6.1) </td>
    <td>
    <pre class="source">POINT ptStartHitWindowRelative;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xC8 (6.1) </td>
    <td>0xD8 (6.1) </td>
    <td>
    <pre class="source">POINT ptLastTrack;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xD0 (6.1) </td>
    <td>0xE0 (6.1) </td>
    <td>
    <pre class="source">ULONG ulCountDragOutOfTopTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xD4 (6.1) </td>
    <td>0xE4 (6.1) </td>
    <td>
    <pre class="source">ULONG ulCountDragOutOfLeftRightTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
  <tr>
    <td>0xD8 (6.1) </td>
    <td>0xE8 (6.1) </td>
    <td>
    <pre class="source">ULONG ulCountSizeOutOfTopBottomTarget;</pre>
    </td>
    <td>
    6.1 and higher
    </td>
    <td>
    &nbsp;</td>
  </tr>
</table>


<div class="Footer">
  <p class="Dates">This page was created on 26th August 2017. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c17.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2017. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="62677" -->
</div>
</body>

</html>
