<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Visual C++ Compiler Warning C4199</title>
<link rel="stylesheet" type="text/css" href="../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/msvc.css">
<script type="text/javascript" src="../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/msvc.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell - Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" i-checksum="24274" endspan -->
<h1>Visual C++ Compiler Warning C4199 </h1>
<h2>Message Text </h2>
<pre class="output"><span class="placeholder">text</span></pre>
<h2>Circumstances (External) </h2>
<p>This warning serves mainly, but not solely, as a placeholder for warnings generated 
externally to the compiler. The warning level is entirely in the hands of the external 
component. So too is the message text, which is why it is shown simply as
<span class="placeholder">text</span> above. For this mechanism to be useful, the
<span class="placeholder">text</span> would describe the error in some detail, perhaps 
even with its own scheme of error numbers. </p>
<p>The external component will be an attribute provider DLL, such as ATLPROV. Indeed, 
since Microsoft does not document how to write attribute providers and ATLPROV is 
the only attribute provider DLL that Microsoft supplies with Visual C++, ATLPROV 
is in practice the only cause of externally generated C4199 warnings. </p>
<h3>ATL Warnings </h3>
<p>All ATL warnings generated by ATLPROV feed back to the compiler as C4199 (mostly 
at level 3). The most common form for the whole warning message is: </p>
<pre class="output"><span class="placeholder">position</span> : warning C4199: <span class="placeholder">attribute</span>
        Atl Attribute Provider : warning ATL<span class="placeholder">number</span>: <span class="placeholder">message</span></pre>
<p>where <span class="placeholder">position</span> (the file name and line number) 
is generated by the compiler, as usual, but everything from
<span class="placeholder">attribute</span> onwards is from ATLPROV, including most 
notably the ATL warning number and message text. </p>
<h4>Disguised ATL Warnings </h4>
<p>In a few cases however, the ATL message text becomes the whole of the message 
text for compiler warning C4199. The whole warning message is just </p>
<pre class="output"><span class="placeholder">position</span> : warning C4199: <span class="placeholder">text</span></pre>
<p>as if generated internally by the compiler. There is no ATL warning number, no 
indication that the warning originated with the ATL Attribute Provider, and no help 
from the product documentation, which omits C4199 from its list of
<span class="citation">C/C++ Build Errors</span>. When the
<span class="placeholder">text</span> is one of </p>
<ul>
  <li>Cannot inject full attribute code due to duplicate member:
  <span class="placeholder">member</span> </li>
  <li>Cannot inject full attribute code due to duplicate base class:
  <span class="placeholder">class</span> </li>
  <li>Cannot inject full attribute code due to duplicate global:
  <span class="placeholder">global</span> </li>
  <li>Attributes are not supported on nested classes </li>
</ul>
<p>programmers should understand that they are actually dealing with ATL warnings
<a href="../../../libraries/atl/warnings/atl4001.htm">ATL4001</a>, ATL4002, ATL4003 
and ATL4005 respectively. </p>
<h2>Circumstances (Internal) </h2>
<p>In one case, the compiler may itself raise warning C4199, with the compiler’s 
own message text. When evaluating arguments passed to a custom attribute, the compiler 
allows <span class="keyword">typeof</span> as a synonym of <span class="keyword">
__typeof</span>, but with a warning (at level 1). The message text is </p>
<pre class="output">please use __typeof</pre>
<p>For an example, compile the minimal but nonsensical </p>
<pre class="source">#using  &lt;mscorlib.dll&gt;
using namespace System;

[
    attribute (All)
]
__gc class Test
{
    public: Test (Type *);
};

[
    module:Test (typeof (Test));
];                                      // C4199</pre>
<p>with the <span class="switch">/clr</span> option. </p>
<h2>Documentation Status </h2>
<p>As noted above, the product documentation does not list warning C4199 among the
<span class="citation">C/C++ Build Errors</span>. This warning’s existence and (main) 
purpose are however disclosed in the documentation of the <span class="switch">
<a href="../../cl/options/f$x.htm">/Fx</a></span> option, which reproduces the directive
</p>
<pre class="source">#pragma warning(disable: 4199) // Suppress warnings from attribute providers</pre>
<p>that appears near the top of every compiler-generated “merged injected text” 
file. </p>
<div class="Footer">
  <p class="Dates">This page was created on 3rd August 2006 and was last modified 
  on 10th June 2009. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c0609.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2006-2009. Geoff Chappell. All rights reserved.
<a href="../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" i-checksum="62552" endspan -->
</div>

</body>

</html>
