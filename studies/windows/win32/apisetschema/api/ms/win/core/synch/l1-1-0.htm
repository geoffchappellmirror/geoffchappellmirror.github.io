<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>API-MS-Win-Core-Synch-L1-1-0</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/win32.css">
<script type="text/javascript" src="../../../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/win32.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" i-checksum="32624" endspan -->
<h1>API-MS-Win-Core-Synch-L1-1-0 </h1>
<p>All functions in the API-MS-Win-Core-Synch-L1-1-0 set are documented exports 
from KERNEL32: </p>
<ul>
  <li><span class="function">AcquireSRWLockExclusive</span> </li>
  <li><span class="function">AcquireSRWLockShared</span> </li>
  <li><span class="function">CancelWaitableTimer</span> </li>
  <li><span class="function">CreateEventA</span> </li>
  <li><span class="function">CreateEventW</span> </li>
  <li><span class="function">CreateEventExA</span> </li>
  <li><span class="function">CreateEventExW</span> </li>
  <li><span class="function">CreateMutexA</span> </li>
  <li><span class="function">CreateMutexW</span> </li>
  <li><span class="function">CreateMutexExA</span> </li>
  <li><span class="function">CreateMutexExW</span> </li>
  <li><span class="function">CreateSemaphoreExW</span> </li>
  <li><span class="function">CreateWaitableTimerExW</span> </li>
  <li><span class="function">DeleteCriticalSection</span> </li>
  <li><span class="function">EnterCriticalSection</span> </li>
  <li><span class="function">InitializeCriticalSection</span> </li>
  <li><span class="function">InitializeCriticalSectionAndSpinCount</span> </li>
  <li><span class="function">InitializeCriticalSectionEx</span> </li>
  <li><span class="function">InitializeSRWLock</span> </li>
  <li><span class="function">LeaveCriticalSection</span> </li>
  <li><span class="function">OpenEventA</span> </li>
  <li><span class="function">OpenEventW</span> </li>
  <li><span class="function">OpenMutexW</span> </li>
  <li><span class="function">OpenProcess</span> </li>
  <li><span class="function">OpenSemaphoreW</span> </li>
  <li><span class="function">OpenWaitableTimerW</span> </li>
  <li><span class="function">ReleaseMutex</span> </li>
  <li><span class="function">ReleaseSRWLockExclusive</span> </li>
  <li><span class="function">ReleaseSRWLockShared</span> </li>
  <li><span class="function">ReleaseSemaphore</span> </li>
  <li><span class="function">ResetEvent</span> </li>
  <li><span class="function">SetCriticalSectionSpinCount</span> </li>
  <li><span class="function">SetEvent</span> </li>
  <li><span class="function">SetWaitableTimer</span> </li>
  <li><span class="function">SetWaitableTimerEx</span> </li>
  <li><span class="function">SleepEx</span> </li>
  <li><span class="function">TryAcquireSRWLockExclusive</span> </li>
  <li><span class="function">TryAcquireSRWLockShared</span> </li>
  <li><span class="function">TryEnterCriticalSection</span> </li>
  <li><span class="function">WaitForMultipleObjectsEx</span> </li>
  <li><span class="function">WaitForSingleObject</span> </li>
  <li><span class="function">WaitForSingleObjectEx</span> </li>
</ul>
<!--webbot bot="Include" U-Include="../../../../../_include/stubs_k32_except.htm" TAG="BODY" startspan -->

<p>For most of these functions, the implementations in KERNEL32 version 6.1 and 
higher are just stubs which transfer the handling to wherever the schema redirects 
the API Set. The exceptions are: </p>

<!--webbot bot="Include" i-checksum="62144" endspan -->
<ul>
  <li><span class="function">AcquireSRWLockExclusive</span>, </li>
  <li><span class="function">AcquireSRWLockShared</span>, </li>
  <li><span class="function">DeleteCriticalSection</span>, </li>
  <li><span class="function">EnterCriticalSection</span>, </li>
  <li><span class="function">InitializeCriticalSection</span>, </li>
  <li><span class="function">InitializeSRWLock</span>, </li>
  <li><span class="function">LeaveCriticalSection</span>, </li>
  <li><span class="function">ReleaseSRWLockExclusive</span>, </li>
  <li><span class="function">ReleaseSRWLockShared</span>, </li>
  <li><span class="function">SetCriticalSectionSpinCount</span>, </li>
  <li><span class="function">TryAcquireSRWLockExclusive</span>, </li>
  <li><span class="function">TryAcquireSRWLockShared</span>, </li>
  <li><span class="function">TryEnterCriticalSection</span>, </li>
</ul>
<p>which are each forwarded to a corresponding NTDLL function; and </p>
<ul>
  <li><span class="function">SetWaitableTimerEx</span>, which is forwarded to API-MS-Win-Core-ThreadPool-L1-1-0, 
  i.e., to a different API Set; </li>
  <li><span class="function">WaitForMultipleObjectsEx</span>, for which KERNEL32 
  wraps substantial code around its transfer to the API Set; </li>
  <li><span class="function">WaitForSingleObject</span> and
  <span class="function">WaitForSingleObjectEx</span>, for which KERNEL32 pre-processes 
  its transfer to the API Set. </li>
</ul>
<p>The handling of <span class="function">SetWaitableTimerEx</span> is surely a 
bug in one way or another, but inspection just of the executable files can’t tell 
which way. It seems more plausible that the function is meant to be in this API 
Set, with the other functions for waitable timers, and that KERNEL32 somehow has 
its forward wrong. </p>
<h2>New Locations </h2>
<!--webbot bot="Include" U-Include="../../../../../_include/impl_kb_fork32stubs.htm" TAG="BODY" startspan -->

<p>For each function that KERNEL32 version 6.1 transfers to the API Set, a non-trivial 
implementation is exported from KERNELBASE version 6.1 and higher. </p>

<!--webbot bot="Include" i-checksum="16261" endspan -->
<p>All the functions that KERNEL32 forwards to an NTDLL function are also exported 
from KERNELBASE version 6.1 and higher, also as forwards to the NTDLL function.
</p>
<h2>Schema Redirection </h2>
<!--webbot bot="Include" U-Include="../../../../../_include/61/redir_k32_to_k32kb.htm" TAG="BODY" startspan -->

<p>The Windows 7 schema redirects this API Set to KERNEL32, except that when KERNEL32 
itself imports from the API Set, the redirection is to KERNELBASE. Thus: </p>
<ul>
  <li>high-level executables, which do not use the API Set, continue to import these 
  functions from KERNEL32; </li>
  <li>low-level executables have their imports from the API Set redirected to KERNEL32;
  </li>
  <li>stub implementations in KERNEL32 import from underlying implementations in 
  KERNELBASE. </li>
</ul>

<!--webbot bot="Include" i-checksum="39212" endspan -->
<div class="Footer">
  <p class="Dates">This page was created on 15th June 2010 and was last modified 
  on 22nd June 2010. </p>
  <!--webbot bot="Include" U-Include="../../../../../../_include/c10.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2010. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" i-checksum="5555" endspan -->
</div>

</body>

</html>
