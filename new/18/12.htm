<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>New or Updated in December 2018</title>
<link rel="stylesheet" type="text/css" href="../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../_styles/tree.css">
<script type="text/javascript" src="../../_scripts/master.js"></script>
<script type="text/javascript" src="../../_scripts/document.js"></script>
<script type="text/javascript" src="../../_scripts/tree.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript Header" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="14880" -->
<div class="Main">
  <h1>New or Updated in December 2018 </h1>
  <p>After some weekend work for new research didn’t get far enough in November 
  to produce anything that I regard as publishable (and, worse, left me to realise 
  that much of what I prepared in October is a mess), I’ve been determined to make 
  more time. </p>
  <p>Regular readers will know of my off-and-on interest over more than a decade 
  in Event Tracing for Windows (ETW). My last round of writing on this, almost exactly 
  two years ago, was not only hurried (for I surely had already run out of time 
  to indulge in unpaid research) but has looked ever since like it had been yet 
  another exercise in writing to a void, with nobody asking me about it for years. 
  On the plus side, at least it hasn’t brought me the experience of finding that 
  people have since presented on the subject at conferences without having noticed 
  my prior work or thought it worth citing. (Should I let this remind me to look 
  again at my work on the
  <a href="../../studies/windows/win32/apisetschema/index.htm">API Set Schema</a> 
  from 2010?) </p>
  <p>Then, in the last few months of 2018, multiple correspondents asked about ETW. 
  This got me thinking again about the subject. No, that’s not right, for the subject 
  is too useful not to be always on the mind. What it got me thinking about was
  <span class="emphasis">writing</span> on the subject. In some ways, my thinking 
  doesn’t seem to have moved on from my diary notes of <a href="../16/12.htm">December 
  2016</a>, but let’s see what comes of a revisit. As yet another plus, this even 
  brought me to complete a page that I had left unpublished way back in 2008. I 
  have too much such stuff lying around, going mouldy at the bottom of the virtual 
  desk drawer. </p>
  <h2>Kernel Mode </h2>
  <div class="Tree">
    <ul>
      <li class="Expanded Branch">Kernel
      <ul>
        <li class="Expanded Branch">API
        <ul>
          <li class="Expanded Branch">Event Tracing for Windows
          <ul>
            <li class="Expanded Branch">Callouts
            <ul>
              <li><a href="../../studies/windows/km/ntoskrnl/api/etw/callouts/hookid.htm">Hook IDs</a> </li>
            </ul>
            </li>
            <li class="Expanded Branch">Lock Tracing
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/locktrace/wmi_resource.htm">WMI_RESOURCE</a> (new, in preparation) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/locktrace/wmi_spinlock.htm">WMI_SPINLOCK</a> (new, in preparation) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Real-Time Support
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/rtsup/realtime_consumer.htm">ETW_REALTIME_CONSUMER</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Registration
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/guid_entry.htm">ETW_GUID_ENTRY</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/register/reg_entry/index.htm">ETW_REG_ENTRY</a> </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Trace API
            <ul>
              <li class="Expanded Branch">Functions
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/control/index.htm">NtTraceControl</a> (new, in preparation) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/event/index.htm">NtTraceEvent</a> (new, in preparation) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/notification_header.htm">ETW_NOTIFICATION_HEADER</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/message_trace_user.htm">MESSAGE_TRACE_USER</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/traceapi/wmi_logger_information/index.htm">WMI_LOGGER_INFORMATION</a> (new) </li>
              </ul>
              </li>
              <li class="Expanded Branch">Implementation
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/notify/notification_header.htm">ETWP_NOTIFICATION_HEADER</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/notify/queue_entry.htm">ETW_QUEUE_ENTRY</a> (new) </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Trace Logging
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/etw_kernel_header_extension.htm">ETW_KERNEL_HEADER_EXTENSION</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/event_instance_guid_header.htm">EVENT_INSTANCE_GUID_HEADER</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/event_instance_header.htm">EVENT_INSTANCE_HEADER</a> (new) </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/event_trace_header.htm">EVENT_TRACE_HEADER</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/message_trace_header.htm">MESSAGE_TRACE_HEADER</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/trace_logfile_header.htm">TRACE_LOGFILE_HEADER</a> </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracelog/wmi_buffer_header.htm">WMI_BUFFER_HEADER</a> </li>
              </ul>
              </li>
            </ul>
            </li>
            <li class="Expanded Branch">Trace Support
            <ul>
              <li class="Expanded Branch">Structures
              <ul>
                <li><a href="../../studies/windows/km/ntoskrnl/inc/api/ntwmi/perfinfo_groupmask.htm">PERFINFO_GROUPMASK</a> </li>
              </ul>
              </li>
              <li class="Expanded Branch">Implementation
              <ul>
                <li class="Expanded Branch"><a href="../../studies/windows/km/ntoskrnl/api/etw/tracesup/wmi_logger_context/index.htm">WMI_LOGGER_CONTEXT</a>
                <ul>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracesup/wmi_logger_context/flags.htm">Flags</a> </li>
                  <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracesup/wmi_logger_context/requestflag.htm">RequestFlag</a> </li>
                </ul>
                </li>
                <li><a href="../../studies/windows/km/ntoskrnl/api/etw/tracesup/wmi_logger_mode.htm">WMI_LOGGER_MODE</a> </li>
              </ul>
              </li>
            </ul>
            </li>
          </ul>
          </li>
          <li class="Expanded Branch"><a href="../../studies/windows/km/ntoskrnl/api/wdi/index.htm">Windows Diagnostic Infrastructure</a>
          <ul>
            <li><a href="../../studies/windows/km/ntoskrnl/api/wdi/sem.htm">The Scenario Event Mapper (SEM)</a> (new) </li>
            <li class="Expanded Branch">Functions
            <ul>
              <li><a href="../../studies/windows/km/ntoskrnl/api/wdi/wdiapi/end.htm">EtwWriteEndScenario</a> (new, in preparation) </li>
              <li><a href="../../studies/windows/km/ntoskrnl/api/wdi/wdiapi/start.htm">EtwWriteStartScenario</a> (new, in preparation) </li>
            </ul>
            </li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>
      </li>
    </ul>
  </div>
  <h2>Win32 </h2>
  <div class="Tree">
    <ul>
      <li class="Expanded Branch">NTDLL
      <ul>
        <li class="Expanded Branch">API
        <ul>
          <li class="Expanded Branch">Event Tracing
          <ul>
            <li class="Expanded Branch">Event API
            <ul>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/evntapi/notificationregister.htm">EtwNotificationRegister</a> (new, in preparation) </li>
            </ul>
            </li>
            <li class="Expanded Branch">GUID Registration
            <ul>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/regguidsapi/createtraceinstanceid.htm">EtwCreateTraceInstanceId</a> (new) </li>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/regguidsapi/gettraceenableflags.htm">EtwGetTraceEnableFlags</a> (new) </li>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/regguidsapi/gettraceenablelevel.htm">EtwGetTraceEnableLevel</a> (new) </li>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/regguidsapi/gettraceloggerhandle.htm">EtwGetTraceLoggerHandle</a> (new) </li>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/regguidsapi/registertraceguids.htm">EtwRegisterTraceGuids</a> (new, in preparation) </li>
            </ul>
            </li>
            <li class="Expanded Branch">User-Mode Logger
            <ul>
              <li><a href="../../studies/windows/win32/ntdll/api/etw/umlog/um_logger_context/index.htm">The User-Mode WMI_LOGGER_CONTEXT</a> (new, in preparation) </li>
            </ul>
            </li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>
      </li>
      <li class="Expanded Branch">ADVAPI32
      <ul>
        <li class="Expanded Branch">Functions
        <ul>
          <li class="Expanded Branch">Event Tracing
          <ul>
            <li class="Expanded Branch">Logging API
            <ul>
              <li><a href="../../studies/windows/win32/advapi32/api/etw/logapi/event.htm">TraceEvent</a> (new) </li>
              <li><a href="../../studies/windows/win32/advapi32/api/etw/logapi/eventinstance.htm">TraceEventInstance</a> (new) </li>
              <li><a href="../../studies/windows/win32/advapi32/api/etw/logapi/message.htm">TraceMessage</a> (new) </li>
              <li><a href="../../studies/windows/win32/advapi32/api/etw/logapi/messageva.htm">TraceMessageVa</a> (new) </li>
            </ul>
            </li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>
      </li>
    </ul>
  </div>
  <p>High in my priorities for updating has been to get (and convey) a better sense 
  of the history. It amazes me that Microsoft attracts positive comment not so much 
  for the large (and welcome) expansion of Windows instrumentation but for its supposed 
  openness with all this new functionality. I see it rather differently. </p>
  <div class="Footer">
    <!--webbot bot="Include" U-Include="../../_include/c18.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2018. Geoff Chappell. All rights reserved.  
<a href="../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="40676" -->
  </div>
</div>

</body>

</html>
