<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>OBJECT_DIRECTORY_ENTRY</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js" defer></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="48540" -->
<div class="Main">
  <h1>OBJECT_DIRECTORY_ENTRY </h1>
  <p>The <span class="struct">OBJECT_DIRECTORY_ENTRY</span> structure (formally
  <span class="struct">_OBJECT_DIRECTORY_ENTRY</span>) is a directory object’s record 
  of an object’s presence in the directory. </p>
  <h2>Variability </h2>
  <p>The <span class="struct">OBJECT_DIRECTORY_ENTRY</span> is highly susceptible 
  to changing between builds. The following changes of size give some rough indication:
  </p>
  <table class="Sizes">
    <colgroup>
      <col class="Version"><col class="Size" span="2">
    </colgroup>
    <thead>
      <tr>
        <th>Version </th>
        <th>Size (x86) </th>
        <th>Size (x64) </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>3.10 to early 5.2 (before SP1) </td>
        <td>0x08 </td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>late 5.2 to 2004 </td>
        <td>0x0C </td>
        <td>0x18 </td>
      </tr>
    </tbody>
  </table>
  <h2>Layout </h2>
  <p>The sizes in the preceding table and the offsets, names and types in the next 
  are from type information in public symbol files for the kernel. </p>
  <table class="Struct">
    <colgroup>
      <col class="Offset" span="2"><col class="Definition">
      <col class="Versions">
    </colgroup>
    <thead>
      <tr>
        <th>Offset (x86) </th>
        <th>Offset (x64) </th>
        <th>Definition </th>
        <th>Versions </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0x00 </td>
        <td>0x00 </td>
        <td>
        <pre class="source">OBJECT_DIRECTORY_ENTRY *ChainLink;</pre>
        </td>
        <td>all </td>
      </tr>
      <tr>
        <td>0x04 </td>
        <td>0x08 </td>
        <td>
        <pre class="source">PVOID Object;</pre>
        </td>
        <td>all </td>
      </tr>
      <tr>
        <td>0x08 </td>
        <td>0x10 </td>
        <td>
        <pre class="source">ULONG HashValue;</pre>
        </td>
        <td>late 5.2 and higher </td>
      </tr>
    </tbody>
  </table>
  <p>The <span class="member">ChainLink</span>, if not <span class="constant">NULL</span>, 
  points to the entry for another object whose name within the directory has the 
  same hash index. Through the whole history of Windows (so far), the hash index 
  is the remainder from dividing the <span class="member">HashValue</span> by 37, 
  this being the number of separate chains that start in the
  <span class="struct"><a href="object_directory.htm">OBJECT_DIRECTORY</a></span> 
  structure’s array of <span class="member">HashBuckets</span>. For the first decade, 
  however, the quotient from this division was discarded. Apparently it was not 
  until the development of 64-bit Windows that MIcrosoft realised (or got round 
  to acting on the obvious) that searching any one chain would be faster if the 
  different hash values for different names were retained. </p>
  <div class="Footer">
    <p class="Dates">This page was created on 15th
    <a href="../../../../../../../new/22/07.htm">August 2022</a> and was last modified 
    on 22nd August 2022. </p>
    <!--webbot bot="Include" U-Include="../../../../_include/c22.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2022. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="5890" -->
  </div>
</div>

</body>

</html>
