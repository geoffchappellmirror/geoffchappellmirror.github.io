<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SYSTEM_GDI_DRIVER_INFORMATION</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li class="LinkListItem"><a href="../../../../../../../index.htm"><span>Home</span></a> </li>
      <li class="LinkListItem"><a target="_self" href="../../../../toc.htm"><span>Table of Contents</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../about/index.htm"><span>About This Site</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../new/index.htm"><span>What’s New?</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../feedback/index.htm"><span>Feedback</span></a> </li>
      <li class="LinkListItem"><a href="../../../../../../../consult/index.htm"><span>Consult</span></a> </li>
    </ul>
  </div>
  <div id="Logo">
    <p>Geoff Chappell, Software Analyst </p>
  </div>
</div>

<!--webbot bot="Include" endspan i-checksum="29544" -->
<h1>SYSTEM_GDI_DRIVER_INFORMATION </h1>
<p>The <span class="struct">SYSTEM_GDI_DRIVER_INFORMATION</span> structure both 
provides input to and receives output from <span class="function">
<a href="set.htm">ZwSetSystemInformation</a></span> or <span class="function">NtSetSystemInformation</span> 
when given the information classes <span class="constant">SystemLoadGdiDriverInformation</span> 
(0x1A) or <span class="constant">SystemLoadGdiDriverInSystemSpace</span> (0x36). </p>
<h2>Documentation Status </h2>
<p>The <span class="struct">SYSTEM_GDI_DRIVER_INFORMATION</span> structure is not 
documented. </p>
<!--webbot bot="Include" U-Include="_include/type_info_urlmon.htm" TAG="BODY" startspan -->

<p>Microsoft does publish the practical equivalent of a C-language definition as 
type information in public symbol files, though not for the kernel, where the structure 
is prepared, nor even for low-level user-mode DLLs that interpret the structure, 
but for various higher-level user-mode DLLs such as URLMON.DLL and only then starting 
with version 6.2. </p>

<!--webbot bot="Include" endspan i-checksum="38013" -->
<!--webbot bot="Include" U-Include="_include/type_info_ddklibs.htm" TAG="BODY" startspan -->

<p>Two earlier disclosures of type information are known, though not in symbol files 
but in statically linked libraries: GDISRVL.LIB from the Device Driver Kit (DDK) 
for Windows NT 3.51; and SHELL32.LIB from the DDK for Windows NT 4.0. </p>

<!--webbot bot="Include" endspan i-checksum="55883" -->
<h2>Layout </h2>
<p>The <span class="struct">SYSTEM_GDI_DRIVER_INFORMATION</span> is 0x1C or 0x38 
bytes in 32-bit and 64-bit Windows, respectively, in version 5.1 and higher. It 
is thought to date from version 3.51, when it was only 0x08 bytes. It is 0x18 bytes 
in versions 4.0 and 5.0. </p>
<table class="Struct">
  <colgroup>
    <col class="Offset" span="2"><col class="Definition">
  </colgroup>
  <tr>
    <th>Offset (x86) </th>
    <th>Offset (x64) </th>
    <th>Definition </th>
    <th>Versions </th>
    <th>Remarks </th>
  </tr>
  <tr>
    <td>0x00 </td>
    <td>0x00 </td>
    <td>
    <pre class="source">UNICODE_STRING DriverName;</pre>
    </td>
    <td>
    4.0 and higher
    </td>
    <td>input </td>
  </tr>
  <tr>
    <td>0x08 </td>
    <td>0x10 </td>
    <td>
    <pre class="source">PVOID ImageAddress;</pre>
    </td>
    <td>
    4.0 and higher
    </td>
    <td>output </td>
  </tr>
  <tr>
    <td>0x00 (3.10 to 3.51); <br>
    0x0C </td>
    <td>0x18 </td>
    <td>
    <pre class="source">PVOID SectionPointer;</pre>
    </td>
    <td>
    3.51 and higher
    </td>
    <td>output </td>
  </tr>
  <tr>
    <td>0x04 (3.10 to 3.51); <br>
    0x10 </td>
    <td>0x20 </td>
    <td>
    <pre class="source">PVOID EntryPoint;</pre>
    </td>
    <td>
    3.51 and higher
    </td>
    <td>output </td>
  </tr>
  <tr>
    <td>0x14 </td>
    <td>0x28 </td>
    <td>
    <pre class="source">IMAGE_EXPORT_DIRECTORY *ExportSectionPointer;</pre>
    </td>
    <td>
    4.0 and higher
    </td>
    <td>output </td>
  </tr>
  <tr>
    <td>0x18 </td>
    <td>0x30 </td>
    <td>
    <pre class="source">ULONG ImageLength;</pre>
    </td>
    <td>
    5.1 and higher
    </td>
    <td>output </td>
  </tr>
</table>
<div class="Footer">
  <p class="Dates">This page was created on 9th July 2016 but was not published 
  until 26th <a href="../../../../../../../new/16/10.htm">October 2016</a>. It was 
  last modified on 27th June 2019. </p>
  <!--webbot bot="Include" U-Include="../../../../_include/c19.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2019. Geoff Chappell. All rights reserved. 
<a href="../../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" endspan i-checksum="6722" -->
</div>

</body>

</html>
