<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>x86BiosAllocateBuffer</title>
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/master.css">
<link rel="stylesheet" type="text/css" href="../../../../../../_styles/document.css">
<link rel="stylesheet" type="text/css" href="../../../_styles/km.css">
<script type="text/javascript" src="../../../../../../_scripts/master.js"></script>
<script type="text/javascript" src="../../../../../../_scripts/document.js"></script>
<script type="text/javascript" src="../../../_scripts/km.js"></script>
</head>

<body>

<!--webbot bot="Include" U-Include="../../../_include/noscript.htm" TAG="BODY" startspan -->

<div class="NoScript" id="Banner">
  <div id="Links">
    <ul class="LinkList">
      <li> 
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../index.htm">Home</a> </li><!--
     --><li class="LinkListItem"><a target="_self" href="../../../toc.htm">Table of Contents</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../about/index.htm">About This Site</a> </li>
      </ul>
      <ul class="PreferNoWrap">
        <li class="LinkListItem"><a href="../../../../../../new/index.htm">What’s New?</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../feedback/index.htm">Feedback</a> </li><!--
     --><li class="LinkListItem"><a href="../../../../../../consult/index.htm">Consult</a> </li>
      </ul>
      </li>
    </ul>
  </div>
  <div id="Logo">
    <p><span class="PreferNoWrap">Geoff Chappell -</span> <span class="PreferNoWrap">Software Analyst</span> </p>
  </div>
</div>

<!--webbot bot="Include" i-checksum="43332" endspan -->
<h1>x86BiosAllocateBuffer </h1>
<p>This function allocates a transfer buffer in the shadow memory of the
<a href="index.htm">x86 BIOS emulator</a>. </p>
<h2>Declaration </h2>
<pre class="source">NTSTATUS
x86BiosAllocateBuffer (
    ULONG *Size,
    USHORT *Segment,
    USHORT *Offset);</pre>
<h3>Parameters </h3>
<p>The <span class="argument">Size</span> argument is the address of a variable 
that provides the size (in bytes) that is wanted for the buffer, and which provides 
on output the size that is allocated. If the function succeeds, the size allocated 
will be at least as many as requested. </p>
<p>The <span class="argument">Segment</span> and <span class="argument">Offset</span> 
arguments provide the address of variables that are to receive a real-mode segment 
and offset for the allocated buffer. </p>
<h3>Return Value </h3>
<p>The function returns zero (<span class="constant">STATUS_SUCCESS</span>) for 
success, else a status code. </p>
<h2>Behaviour </h2>
<p>This function accesses a simple memory manager which has just one buffer. This 
buffer is 4KB at the real-mode address 2000:0000. </p>
<p>It is an error (<span class="constant">STATUS_INSUFFICIENT_RESOURCES</span>) 
if this simple memory manager is not initialised or if the buffer is already allocated 
or if the request is too large for the one buffer. Otherwise, the caller is allocated 
the whole buffer, at the real-mode address 2000:0000, and the function succeeds.
</p>
<p>The allocated buffer can be returned to the memory manager by calling the
<span class="function"><a href="freebuffer.htm">x86BiosFreeBuffer</a></span> function.
</p>
<h2>Availability </h2>
<p>The <span class="function">x86BiosAllocateBuffer</span> function is exported 
by name from the HAL in version 6.0 and higher. It is undocumented. </p>
<div class="Footer">
  <p class="Dates">This page was created on 27th April 2009 and was last modified 
  on 4th May 2009. </p>
  <!--webbot bot="Include" U-Include="../../../_include/c09.htm" TAG="BODY" startspan -->

<p class="Copyright">Copyright © 2009. Geoff Chappell. All rights reserved. 
<a href="../../../../../../about/terms.htm">Conditions apply</a>. </p>

<!--webbot bot="Include" i-checksum="62869" endspan -->
</div>

</body>

</html>
